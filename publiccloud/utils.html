<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/publiccloud/utils.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='../style.css' />
</head>

<body>



<ul id="index"><li><a href="../index.html"><i>&lt;= Back to file list</i></a></li>
  <li>
    <ul>
      <li><a href="#ssh_add_suseconnect_product">ssh_add_suseconnect_product</a></li>
      <li><a href="#ssh_remove_suseconnect_product">ssh_remove_suseconnect_product</a></li>
      <li><a href="#get_credentials-get_credentials-url_suffix-some_csp.json-namespace-some_name-output_json-.-local_credentials.json">get_credentials get_credentials(url_suffix =&gt; &#39;some_csp.json&#39;[, namespace =&gt; &#39;some_name&#39;, output_json =&gt; &#39;./local_credentials.json&#39;])</a></li>
      <li><a href="#gcloud_install-gcloud_install-url-dir-timeout">gcloud_install gcloud_install($url, $dir, $timeout)</a></li>
      <li><a href="#ssh_update_transactional_system">ssh_update_transactional_system</a></li>
    </ul>
  </li>
</ul><h1>lib/publiccloud/utils.pm</h1>

<h2 id="ssh_add_suseconnect_product">ssh_add_suseconnect_product</h2>

<pre><code>ssh_add_suseconnect_product($remote, $name, [program =&gt; $program, [version =&gt; $version, [arch =&gt; $arch, [params =&gt; $params, [timeout =&gt; $timeout, [retries =&gt; $retries, [delay =&gt; $delay]]]]]]]);</code></pre>

<p>Register addon in the SUT</p>

<h2 id="ssh_remove_suseconnect_product">ssh_remove_suseconnect_product</h2>

<pre><code>ssh_remove_suseconnect_product($name, [$version, [$arch, [$params]]]);</code></pre>

<p>Deregister addon in SUT</p>

<h2 id="get_credentials-get_credentials-url_suffix-some_csp.json-namespace-some_name-output_json-.-local_credentials.json">get_credentials get_credentials(url_suffix =&gt; &#39;some_csp.json&#39;[, namespace =&gt; &#39;some_name&#39;, output_json =&gt; &#39;./local_credentials.json&#39;])</h2>

<p>Get credentials from the Public Cloud micro service, which requires user and password. The resulting json will be optionally stored in a file. This function also get input from these variables: - PUBLIC_CLOUD_CREDENTIALS_URL - _SECRET_PUBLIC_CLOUD_CREDENTIALS_USER - _SECRET_PUBLIC_CLOUD_CREDENTIALS_PWD</p>

<dl>

<dt id="url_suffix---last-part-of-the-micro-service-url"><b>url_suffix</b> - last part of the micro service url</dt>
<dd>

</dd>
<dt id="output_json---optional-save-the-credential-to-json-file-with-provided-filename"><b>output_json</b> - (optional) save the credential to json file with provided filename.</dt>
<dd>

</dd>
<dt id="namespace---optional-credential-namespace-on-the-micro-service.-If-not-provided-read-from-PUBLIC_CLOUD_NAMESPACE"><b>namespace</b> - (optional) credential namespace on the micro service. If not provided read from PUBLIC_CLOUD_NAMESPACE</dt>
<dd>

</dd>
</dl>

<h2 id="gcloud_install-gcloud_install-url-dir-timeout">gcloud_install gcloud_install($url, $dir, $timeout)</h2>

<p>This function is used to install the gcloud CLI for the GKE Google Cloud.</p>

<p>From $url we get the full package and install it in $dir local folder as a subdir of /root. Defaults are available for a simple call without parameters: gcloud_install()</p>

<h2 id="ssh_update_transactional_system">ssh_update_transactional_system</h2>

<p>ssh_update_transactional_system($host);</p>

<p>Connect to the remote host <code>$instance</code> using ssh and update the system by running <code>zypper update</code> twice, in transactional mode. The first run will update the package manager, the second run will update the system. Transactional systems like SLE micro used <code>transactional_update up</code> and reboot.</p>


</body>

</html>



<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/sles4sap/azure_cli.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='../style.css' />
</head>

<body>



<ul id="index"><li><a href="../index.html"><i>&lt;= Back to file list</i></a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a>
    <ul>
      <li><a href="#az_version">az_version</a></li>
      <li><a href="#az_group_create">az_group_create</a></li>
      <li><a href="#az_group_name_get">az_group_name_get</a></li>
      <li><a href="#az_group_delete">az_group_delete</a></li>
      <li><a href="#az_network_vnet_create">az_network_vnet_create</a></li>
      <li><a href="#az_network_vnet_subnet_update">az_network_vnet_subnet_update</a>
        <ul>
          <li><a href="#az_network_vnet_get">az_network_vnet_get</a></li>
        </ul>
      </li>
      <li><a href="#az_network_nsg_create">az_network_nsg_create</a></li>
      <li><a href="#az_network_nsg_rule_create">az_network_nsg_rule_create</a></li>
      <li><a href="#az_network_publicip_create">az_network_publicip_create</a></li>
      <li><a href="#az_network_publicip_get">az_network_publicip_get</a></li>
      <li><a href="#az_network_nat_gateway_create">az_network_nat_gateway_create</a></li>
      <li><a href="#az_network_lb_create">az_network_lb_create</a></li>
      <li><a href="#az_network_lb_probe_create">az_network_lb_probe_create</a></li>
      <li><a href="#az_network_lb_rule_create">az_network_lb_rule_create</a></li>
      <li><a href="#az_vm_as_create">az_vm_as_create</a></li>
      <li><a href="#az_vm_create">az_vm_create</a></li>
      <li><a href="#az_vm_list">az_vm_list</a></li>
      <li><a href="#az_vm_instance_view_get">az_vm_instance_view_get</a></li>
      <li><a href="#az_vm_wait_running">az_vm_wait_running</a></li>
      <li><a href="#az_vm_openport">az_vm_openport</a></li>
      <li><a href="#az_vm_wait_cloudinit">az_vm_wait_cloudinit</a></li>
      <li><a href="#az_nic_id_get">az_nic_id_get</a></li>
      <li><a href="#az_nic_get">az_nic_get</a></li>
      <li><a href="#az_nic_name_get">az_nic_name_get</a></li>
      <li><a href="#az_ipconfig_name_get">az_ipconfig_name_get</a></li>
      <li><a href="#az_ipconfig_update">az_ipconfig_update</a></li>
      <li><a href="#az_ipconfig_pool_add">az_ipconfig_pool_add</a></li>
      <li><a href="#az_vm_diagnostic_log_enable">az_vm_diagnostic_log_enable</a></li>
      <li><a href="#az_vm_diagnostic_log_get">az_vm_diagnostic_log_get</a></li>
      <li><a href="#az_storage_account_create">az_storage_account_create</a></li>
      <li><a href="#az_network_peering_create">az_network_peering_create</a></li>
      <li><a href="#az_network_peering_list">az_network_peering_list</a></li>
      <li><a href="#az_network_peering_delete">az_network_peering_delete</a></li>
      <li><a href="#az_disk_create">az_disk_create</a></li>
      <li><a href="#az_resource_delete">az_resource_delete</a></li>
      <li><a href="#az_validate_uuid_pattern">az_validate_uuid_pattern</a></li>
    </ul>
  </li>
</ul><h1>lib/sles4sap/azure_cli.pm</h1>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>Library to compose and run Azure cli commands</p>

<h2 id="az_version">az_version</h2>

<pre><code>az_version();</code></pre>

<p>Print the version of the az cli available on system</p>

<h2 id="az_group_create">az_group_create</h2>

<pre><code>az_group_create(
    name =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;);</code></pre>

<p>Create an Azure resource group in a specific region</p>

<dl>

<dt id="name---full-name-of-the-resource-group"><b>name</b> - full name of the resource group</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-resource-group"><b>region</b> - Azure region where to create the resource group</dt>
<dd>

</dd>
</dl>

<h2 id="az_group_name_get">az_group_name_get</h2>

<pre><code>my $ret = az_group_name_get();</code></pre>

<p>Get the name of all existing Resource Group in the current subscription</p>

<h2 id="az_group_delete">az_group_delete</h2>

<pre><code>az_group_delete( name =&gt; &#39;openqa-rg&#39; );</code></pre>

<p>Delete a resource group with a specific name</p>

<dl>

<dt id="name---full-name-of-the-resource-group1"><b>name</b> - full name of the resource group</dt>
<dd>

</dd>
<dt id="timeout---timeout-default-60"><b>timeout</b> - timeout, default 60</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_vnet_create">az_network_vnet_create</h2>

<pre><code>az_network_vnet_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    vnet =&gt; &#39;openqa-vnet&#39;,
    snet =&gt; &#39;openqa-subnet&#39;,
    address_prefixes =&gt; &#39;10.0.1.0/16&#39;,
    subnet_prefixes =&gt; &#39;10.0.1.0/24&#39;)</code></pre>

<p>Create a virtual network</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-network"><b>resource_group</b> - existing resource group where to create the network</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-VNET"><b>region</b> - Azure region where to create the VNET</dt>
<dd>

</dd>
<dt id="vnet---name-of-the-virtual-network"><b>vnet</b> - name of the virtual network</dt>
<dd>

</dd>
<dt id="snet---name-of-the-subnet"><b>snet</b> - name of the subnet</dt>
<dd>

</dd>
<dt id="address_prefixes---virtual-network-ip-address-space.-Default-192.168.0.0-16"><b>address_prefixes</b> - virtual network ip address space. Default 192.168.0.0/16</dt>
<dd>

</dd>
<dt id="subnet_prefixes---subnet-ip-address-space.-Default-192.168.0.0-24"><b>subnet_prefixes</b> - subnet ip address space. Default 192.168.0.0/24</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_vnet_subnet_update">az_network_vnet_subnet_update</h2>

<pre><code>az_network_vnet_subnet_update(
    resource_group =&gt; &#39;openqa-rg&#39;,
    vnet =&gt; &#39;openqa-vnet&#39;,
    snet =&gt; &#39;openqa-subnet&#39;,
    nat_gateway =&gt; &#39;openqa-nat&#39;)</code></pre>

<p>Update a Subnet</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-network1"><b>resource_group</b> - existing resource group where to create the network</dt>
<dd>

</dd>
<dt id="vnet---name-of-the-virtual-network1"><b>vnet</b> - name of the virtual network</dt>
<dd>

</dd>
<dt id="snet---name-of-the-subnet1"><b>snet</b> - name of the subnet</dt>
<dd>

</dd>
<dt id="nat_gateway---optional-argument-if-provided-the-update-is-about-associating-a-Subnet-th-a-NAT-gateway"><b>nat_gateway</b> - optional argument, if provided the update is about associating a Subnet th a NAT gateway</dt>
<dd>

</dd>
</dl>

<h3 id="az_network_vnet_get">az_network_vnet_get</h3>

<pre><code>my $res = az_network_vnet_get(resource_group =&gt; &#39;openqa-rg&#39;)</code></pre>

<p>Return the output of az network vnet list</p>

<dl>

<dt id="resource_group---resource-group-name-to-query"><b>resource_group</b> - resource group name to query</dt>
<dd>

</dd>
<dt id="query---valid-jmespath-https:-jmespath.org"><b>query</b> - valid jmespath https://jmespath.org/</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_nsg_create">az_network_nsg_create</h2>

<pre><code>az_network_nsg_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-nsg&#39;)</code></pre>

<p>Create a network security group</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-NSG"><b>resource_group</b> - existing resource group where to create the NSG</dt>
<dd>

</dd>
<dt id="name---security-group-name"><b>name</b> - security group name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_nsg_rule_create">az_network_nsg_rule_create</h2>

<pre><code>az_network_nsg_rule_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    nsg =&gt; &#39;openqa-nsg&#39;,
    name =&gt; &#39;openqa-nsg-rule-ssh&#39;,
    port =&gt; 22)</code></pre>

<p>Create a very specific type of inbound rule for an existing network security group Just few parameters are configurable here, like the port number</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-NSG-rule"><b>resource_group</b> - existing resource group where to create the NSG rule</dt>
<dd>

</dd>
<dt id="nsg---existing-security-group-name"><b>nsg</b> - existing security group name</dt>
<dd>

</dd>
<dt id="name---security-rule-name"><b>name</b> - security rule name</dt>
<dd>

</dd>
<dt id="port---allowed-port"><b>port</b> - allowed port</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_publicip_create">az_network_publicip_create</h2>

<pre><code>az_network_publicip_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-pip&#39;,
    zone =&gt; &#39;1 2 3&#39;)</code></pre>

<p>Create an IPv4 public IP resource</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-PubIP"><b>resource_group</b> - existing resource group where to create the PubIP</dt>
<dd>

</dd>
<dt id="name---public-IP-resource-name"><b>name</b> - public IP resource name</dt>
<dd>

</dd>
<dt id="sku---default-Standard"><b>sku</b> - default Standard</dt>
<dd>

</dd>
<dt id="allocation_method---optionally-add---allocation-method"><b>allocation_method</b> - optionally add --allocation-method</dt>
<dd>

</dd>
<dt id="zone---optionally-add---zone"><b>zone</b> - optionally add --zone</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_publicip_get">az_network_publicip_get</h2>

<pre><code>az_network_publicip_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-pip&#39;)</code></pre>

<p>Return an IPv4 public IP address from its name</p>

<dl>

<dt id="resource_group---existing-resource-group-including-the-PubIP"><b>resource_group</b> - existing resource group including the PubIP</dt>
<dd>

</dd>
<dt id="name---existing-public-IP-resource-name"><b>name</b> - existing public IP resource name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_nat_gateway_create">az_network_nat_gateway_create</h2>

<pre><code>az_network_nat_gateway_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    name =&gt; &#39;openqa-nat-gateway&#39;,
    public_ip =&gt; &#39;openqa-pubip&#39;)</code></pre>

<p>Create a NAT Gateway</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-NAT-Gateway"><b>resource_group</b> - existing resource group where to create the NAT Gateway</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-NAT-Gateway"><b>region</b> - Azure region where to create the NAT Gateway</dt>
<dd>

</dd>
<dt id="name---NAT-Gateway-resource-name"><b>name</b> - NAT Gateway resource name</dt>
<dd>

</dd>
<dt id="public_ip---add-to-the-NAT-Gateway-a-public-IP"><b>public_ip</b> - add to the NAT Gateway a public IP</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_lb_create">az_network_lb_create</h2>

<pre><code>az_network_lb_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-lb&#39;,
    vnet =&gt; &#39;openqa-vnet&#39;,
    snet =&gt; &#39;openqa-subnet&#39;,
    backend =&gt; &#39;openqa-be&#39;,
    frontend_ip_name =&gt; &#39;openqa-feip&#39;,
    sku =&gt; &#39;Standard&#39;)</code></pre>

<p>Create a load balancer entity. LB is mostly &quot;just&quot; a &quot;group&quot; definition to link back-end and front-end resources (usually an IP)</p>

<p>SKU Standard (and not Basic) is needed to get some Metrics</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-lb"><b>resource_group</b> - existing resource group where to create lb</dt>
<dd>

</dd>
<dt id="name---load-balancer-name"><b>name</b> - load balancer name</dt>
<dd>

</dd>
<dt id="vnet---existing-Virtual-network-name-where-to-create-LB-in"><b>vnet</b> - existing Virtual network name where to create LB in</dt>
<dd>

</dd>
<dt id="snet---existing-Subnet-network-name-where-to-create-LB-in"><b>snet</b> - existing Subnet network name where to create LB in</dt>
<dd>

</dd>
<dt id="backend---name-to-assign-to-created-backend-pool"><b>backend</b> - name to assign to created backend pool</dt>
<dd>

</dd>
<dt id="frontend_ip_name---name-to-assign-to-created-frontend-ip-will-be-reused-in-az-network-lb-rule-create"><b>frontend_ip_name</b> - name to assign to created frontend ip, will be reused in &quot;az network lb rule create&quot;</dt>
<dd>

</dd>
<dt id="sku---default-Basic"><b>sku</b> - default Basic</dt>
<dd>

</dd>
<dt id="fip---optionally-add---private-ip-address"><b>fip</b> - optionally add --private-ip-address</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_lb_probe_create">az_network_lb_probe_create</h2>

<pre><code>az_network_lb_probe_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    lb_name =&gt; &#39;openqa-lb&#39;,
    name =&gt; &#39;openqa-lb-hp&#39;,
    port =&gt; &#39;4242&#39;,
    protocol =&gt; &#39;Udp&#39;,
    )</code></pre>

<p>Create a load balancer health probe.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-lb-probe"><b>resource_group</b> - existing resource group where to create lb probe</dt>
<dd>

</dd>
<dt id="lb_name---existing-load-balancer-name"><b>lb_name</b> - existing load balancer name</dt>
<dd>

</dd>
<dt id="name---name-for-the-new-health-probe"><b>name</b> - name for the new health probe</dt>
<dd>

</dd>
<dt id="port---port-number-monitored-by-the-health-probe"><b>port</b> - port number monitored by the health probe</dt>
<dd>

</dd>
<dt id="protocol---protocol-for-the-health-probe.-Default-Tcp"><b>protocol</b> - protocol for the health probe. Default Tcp</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_lb_rule_create">az_network_lb_rule_create</h2>

<pre><code>az_network_lb_rule_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    lb_name =&gt; &#39;openqa-lb&#39;,
    hp_name =&gt; &#39;openqa-hb&#39;,
    frontend_ip =&gt; &#39;openqa-fe&#39;,
    backend =&gt; &#39;openqa-be&#39;,
    name =&gt; &#39;openqa-lb-rule&#39;,
    port =&gt; &#39;80&#39;
    )</code></pre>

<p>Configure the load balancer behavior.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-lb-rule"><b>resource_group</b> - existing resource group where to create lb rule</dt>
<dd>

</dd>
<dt id="lb_name---existing-load-balancer-name1"><b>lb_name</b> - existing load balancer name</dt>
<dd>

</dd>
<dt id="hp_name---existing-load-balancer-health-probe-name"><b>hp_name</b> - existing load balancer health probe name</dt>
<dd>

</dd>
<dt id="frontend_ip---existing-load-balancer-front-end-IP-name"><b>frontend_ip</b> - existing load balancer front end IP name</dt>
<dd>

</dd>
<dt id="backend---existing-load-balancer-back-end-pool-name"><b>backend</b> - existing load balancer back end pool name</dt>
<dd>

</dd>
<dt id="name---name-for-the-new-load-balancer-rule"><b>name</b> - name for the new load balancer rule</dt>
<dd>

</dd>
<dt id="port---port-mapped-between-the-frontend-and-the-backend.-This-poor-Perl-wrapper-map-them-1:1"><b>port</b> - port mapped between the frontend and the backend. This poor Perl wrapper map them 1:1</dt>
<dd>

</dd>
<dt id="protocol---protocol-for-the-load-balancer-rule.-Default-Tcp"><b>protocol</b> - protocol for the load balancer rule. Default Tcp</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_as_create">az_vm_as_create</h2>

<pre><code>az_vm_as_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    name =&gt; &#39;openqa-as&#39;,
    fault_count =&gt; 2)</code></pre>

<p>Create an availability set. Later on VM can be assigned to it.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-Availability-set"><b>resource_group</b> - existing resource group where to create the Availability set</dt>
<dd>

</dd>
<dt id="region---region-where-to-create-the-Availability-set"><b>region</b> - region where to create the Availability set</dt>
<dd>

</dd>
<dt id="name---availability-set-name"><b>name</b> - availability set name</dt>
<dd>

</dd>
<dt id="fault_count---value-for---platform-fault-domain-count"><b>fault_count</b> - value for --platform-fault-domain-count</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_create">az_vm_create</h2>

<pre><code>az_vm_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    name =&gt; &#39;openqa-vm&#39;,
    image =&gt; &#39;SUSE:sles-sap-15-sp5:gen2:latest&#39;)</code></pre>

<p>Create a virtual machine</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-VM"><b>resource_group</b> - existing resource group where to create the VM</dt>
<dd>

</dd>
<dt id="region---optional-region-where-to-create-the-VM"><b>region</b> - optional region where to create the VM</dt>
<dd>

</dd>
<dt id="name---virtual-machine-name"><b>name</b> - virtual machine name</dt>
<dd>

</dd>
<dt id="image---OS-image-name"><b>image</b> - OS image name</dt>
<dd>

</dd>
<dt id="vnet---optional-name-of-the-Virtual-Network-where-to-place-the-VM"><b>vnet</b> - optional name of the Virtual Network where to place the VM</dt>
<dd>

</dd>
<dt id="snet---optional-name-of-the-SubNet-where-to-connect-the-VM"><b>snet</b> - optional name of the SubNet where to connect the VM</dt>
<dd>

</dd>
<dt id="size---VM-size-default-Standard_B1s"><b>size</b> - VM size, default Standard_B1s</dt>
<dd>

</dd>
<dt id="availability_set---optional-inclusion-in-an-availability-set"><b>availability_set</b> - optional inclusion in an availability set</dt>
<dd>

</dd>
<dt id="username---optional-admin-username"><b>username</b> - optional admin username</dt>
<dd>

</dd>
<dt id="nsg---optional-inclusion-in-an-network-security-group"><b>nsg</b> - optional inclusion in an network security group</dt>
<dd>

</dd>
<dt id="nic---optional-add-to-the-VM-a-NIC-created-separately-with-az-network-nic-create"><b>nic</b> - optional add to the VM a NIC created separately with &#39;az network nic create&#39;</dt>
<dd>

</dd>
<dt id="public_ip---optional-add-to-the-VM-a-public-IP.-Value-like-is-a-valid-one-and-is-not-the-same-as-not-including-the-argument-at-all"><b>public_ip</b> - optional add to the VM a public IP. Value like &quot;&quot; is a valid one and is not the same as not including the argument at all.</dt>
<dd>

</dd>
<dt id="custom_data---optional-provide-a-cloud-init-script-file"><b>custom_data</b> - optional provide a cloud-init script file</dt>
<dd>

</dd>
<dt id="ssh_pubkey---optional-inclusion-in-an-availability-set-if-missing-the-command-is-configured-to-generate-one"><b>ssh_pubkey</b> - optional inclusion in an availability set, if missing the command is configured to generate one</dt>
<dd>

</dd>
<dt id="security_type---is-used-force-a-specific-value-for---security-type"><b>security_type</b> - is used force a specific value for &#39;--security-type&#39;</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_list">az_vm_list</h2>

<pre><code>my $ret = az_vm_list(resource_group =&gt; &#39;openqa-rg&#39;, query =&gt; &#39;[].name&#39;);</code></pre>

<p>Get the info from all existing VMs within a Resource Group Return a decoded json hash according to the provided jmespath query</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-VMs"><b>resource_group</b> - existing resource group where to search for VMs</dt>
<dd>

</dd>
<dt id="query---valid-jmespath-https:-jmespath.org1"><b>query</b> - valid jmespath https://jmespath.org/</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_instance_view_get">az_vm_instance_view_get</h2>

<pre><code>my $res = az_vm_instance_view_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get some details of a specific VM</p>

<p>Json output looks like:</p>

<p>[ &quot;PowerState/running&quot;, &quot;VM running&quot; ]</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-look-for-a-specific-VM"><b>resource_group</b> - existing resource group where to look for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-virtual-machine"><b>name</b> - name of an existing virtual machine</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_wait_running">az_vm_wait_running</h2>

<pre><code>my $res = az_vm_wait_running(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;,
    timeout =&gt; 300)</code></pre>

<p>Get the VM state until status looks like:</p>

<p>[ &quot;PowerState/running&quot;, &quot;VM running&quot; ]</p>

<p>or reach timeout. Polling frequency is dynamically calculated based on the timeout</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-look-for-a-specific-VM1"><b>resource_group</b> - existing resource group where to look for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-virtual-machine1"><b>name</b> - name of an existing virtual machine</dt>
<dd>

</dd>
<dt id="timeout---optional-default-300"><b>timeout</b> - optional, default 300</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_openport">az_vm_openport</h2>

<pre><code>az_vm_openport(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;,
    port =&gt; 80)</code></pre>

<p>Open a port on an existing VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-VM"><b>name</b> - name of an existing VM</dt>
<dd>

</dd>
<dt id="port---port-to-open"><b>port</b> - port to open</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_wait_cloudinit">az_vm_wait_cloudinit</h2>

<pre><code>az_vm_wait_cloudinit(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Wait cloud-init completion on a running VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM1"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-VM1"><b>name</b> - name of an existing VM</dt>
<dd>

</dd>
<dt id="username---username-default-cloudadmin"><b>username</b> - username default cloudadmin</dt>
<dd>

</dd>
<dt id="timeout---max-wait-time-in-seconds.-Default-3600"><b>timeout</b> - max wait time in seconds. Default 3600.</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_id_get">az_nic_id_get</h2>

<pre><code>my $nic_id = az_nic_id_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get the NIC ID of the first NIC of a given VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-NIC"><b>resource_group</b> - existing resource group where to search for a specific NIC</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-VM2"><b>name</b> - name of an existing VM</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_get">az_nic_get</h2>

<p>Get the NIC data from NIC ID</p>

<dl>

<dt id="nic_id---existing-NIC-ID-eg.-from-az_nic_id_get"><b>nic_id</b> - existing NIC ID (eg. from az_nic_id_get)</dt>
<dd>

</dd>
<dt id="filter---query-filter"><b>filter</b> - query filter</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_name_get">az_nic_name_get</h2>

<pre><code>my $nic_name = az_nic_name_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get the NIC name from NIC ID</p>

<dl>

<dt id="nic_id---existing-NIC-ID-eg.-from-az_nic_id_get1"><b>nic_id</b> - existing NIC ID (eg. from az_nic_id_get)</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_name_get">az_ipconfig_name_get</h2>

<pre><code>my $ipconfig_name = az_ipconfig_name_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get the name of the first IpConfig of a NIC from a NIC ID</p>

<dl>

<dt id="nic_id---existing-NIC-ID-eg.-from-az_nic_id_get2"><b>nic_id</b> - existing NIC ID (eg. from az_nic_id_get)</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_update">az_ipconfig_update</h2>

<pre><code>az_ipconfig_update(
    resource_group =&gt; &#39;openqa-rg&#39;,
    ipconfig_name =&gt; &#39;openqa-ipconfig&#39;,
    nic_name =&gt; &#39;openqa-nic&#39;,
    ip =&gt; &#39;192.168.0.42&#39;)</code></pre>

<p>Change the IpConfig to use a static IP</p>

<dl>

<dt id="resource_group---existing-resource-group"><b>resource_group</b> - existing resource group</dt>
<dd>

</dd>
<dt id="ipconfig_name---existing-IP-configuration-NAME-eg.-from-az_ipconfig_name_get"><b>ipconfig_name</b> - existing IP configuration NAME (eg. from az_ipconfig_name_get)</dt>
<dd>

</dd>
<dt id="nic_name---existing-NIC-NAME-eg.-from-az_nic_name_get"><b>nic_name</b> - existing NIC NAME (eg. from az_nic_name_get)</dt>
<dd>

</dd>
<dt id="ip---IPv4-address-to-assign-as-static-IP"><b>ip</b> - IPv4 address to assign as static IP</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_pool_add">az_ipconfig_pool_add</h2>

<pre><code>az_ipconfig_pool_add(
    resource_group =&gt; &#39;openqa-rg&#39;,
    lb_name =&gt; &#39;openqa-lb&#39;,
    address_pool =&gt; &#39;openqa-addr-pool&#39;,
    ipconfig_name =&gt; &#39;openqa-ipconfig&#39;,
    nic_name =&gt; &#39;openqa-nic&#39;)</code></pre>

<p>Add the IpConfig to a LB address pool</p>

<dl>

<dt id="resource_group---existing-resource-group1"><b>resource_group</b> - existing resource group</dt>
<dd>

</dd>
<dt id="lb_name---existing-Load-balancer-NAME"><b>lb_name</b> - existing Load balancer NAME</dt>
<dd>

</dd>
<dt id="address_pool---existing-Load-balancer-address-pool-name"><b>address_pool</b> - existing Load balancer address pool name</dt>
<dd>

</dd>
<dt id="timeout---timeout-default-601"><b>timeout</b> - timeout, default 60</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_diagnostic_log_enable">az_vm_diagnostic_log_enable</h2>

<pre><code>az_vm_diagnostic_log_enable(resource_group =&gt; &#39;openqa-rg&#39;,
                            storage_account =&gt; &#39;openqasa&#39;,
                            vm_name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Enable diagnostic log for a specific VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM2"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
<dt id="storage_account---existing-storage-account"><b>storage_account</b> - existing storage account</dt>
<dd>

</dd>
<dt id="vm_name---existing-VM-name"><b>vm_name</b> - existing VM name</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_diagnostic_log_get">az_vm_diagnostic_log_get</h2>

<pre><code>my $list_of_logs = az_vm_diagnostic_log_get(resource_group =&gt; &#39;openqa-rg&#39;)</code></pre>

<p>Call `az vm boot-diagnostics json` for each running VM in the resource group associated to this openQA job</p>

<p>Return a list of diagnostic file paths on the JumpHost</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM3"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
</dl>

<h2 id="az_storage_account_create">az_storage_account_create</h2>

<pre><code>az_storage_account_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;
    name =&gt; &#39;openqasa&#39;)</code></pre>

<p>Create a storage account</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-storage-account"><b>resource_group</b> - existing resource group where to create the storage account</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-storage"><b>region</b> - Azure region where to create the storage</dt>
<dd>

</dd>
<dt id="name---name-for-the-storage-account-to-be-created.-Storage-account-name-must-be-between-3-and-24-characters-in-length-and-use-numbers-and-lower-case-letters-only"><b>name</b> - name for the storage account to be created. Storage account name must be between 3 and 24 characters in length and use numbers and lower-case letters only.</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_create">az_network_peering_create</h2>

<pre><code>az_network_peering_create(
    name =&gt; &#39;openqa-fromVNET-toVNET&#39;,
    source_rg =&gt; &#39;openqa-rg&#39;,
    source_vnet =&gt; &#39;openqa-this-vnet&#39;,
    target_rg =&gt; &#39;openqa-rg&#39;,
    target_vnet =&gt; &#39;openqa-this-vnet&#39;)</code></pre>

<p>Create network peering</p>

<dl>

<dt id="name---NAME-for-the-network-peering-to-create"><b>name</b> - NAME for the network peering to create</dt>
<dd>

</dd>
<dt id="source_rg---existing-resource-group-that-contain-vnet-source-of-the-peering"><b>source_rg</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="source_vnet---existing-vnet-in-source_rg-used-as-source-of-the-peering"><b>source_vnet</b> - existing vnet in source_rg, used as source of the peering</dt>
<dd>

</dd>
<dt id="target_rg---existing-resource-group-that-contain-vnet-target-of-the-peering"><b>target_rg</b> - existing resource group that contain vnet target of the peering</dt>
<dd>

</dd>
<dt id="target_vnet---existing-vnet-in-target_rg-used-as-target-of-the-peering"><b>target_vnet</b> - existing vnet in target_rg, used as target of the peering</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_list">az_network_peering_list</h2>

<pre><code>my $res = az_network_peering_list(
    resource_group =&gt; &#39;openqa-rg&#39;,
    vnet =&gt; &#39;openqa-this-vnet&#39;)</code></pre>

<p>Return HASH representing existing net peering</p>

<dl>

<dt id="resource_group---existing-resource-group-that-contain-vnet-source-of-the-peering"><b>resource_group</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="vnet---existing-vnet-in-resource_group-used-as-source-of-the-peering"><b>vnet</b> - existing vnet in resource_group, used as source of the peering</dt>
<dd>

</dd>
<dt id="query---valid-jmespath-https:-jmespath.org2"><b>query</b> - valid jmespath https://jmespath.org/</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_delete">az_network_peering_delete</h2>

<pre><code>az_network_peering_delete(
    name =&gt; &#39;openqa-fromVNET-toVNET&#39;,
    resource_group =&gt; &#39;openqa-rg&#39;,
    vnet =&gt; &#39;openqa-this-vnet&#39;)</code></pre>

<p>Delete a specific network peering</p>

<dl>

<dt id="name---name-of-the-existing-the-network-peering-to-delete"><b>name</b> - name of the existing the network peering to delete</dt>
<dd>

</dd>
<dt id="resource_group---existing-resource-group-that-contain-vnet-source-of-the-peering1"><b>resource_group</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="vnet---existing-vnet-in-resource_group-used-as-source-of-the-peering1"><b>vnet</b> - existing vnet in resource_group, used as source of the peering</dt>
<dd>

</dd>
</dl>

<h2 id="az_disk_create">az_disk_create</h2>

<pre><code>az_disk_create(resource_group=&gt;$resource_group, name=&gt;$name
    [, size_gb=&gt;60, source=$source, tags=&quot;tag1=value1 tag2=value2&quot;]);</code></pre>

<p>Creates new disk device either by specifying <b>size_gb</b> or by cloning another disk device using argument <b>source</b>. Arguments <b>size_gb</b> and <b>source</b> are mutually exclusive.</p>

<dl>

<dt id="name-New-disk-name"><b>name</b> New disk name</dt>
<dd>

</dd>
<dt id="resource_group-Existing-resource-group-name"><b>resource_group</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="source-Create-disk-by-cloning-snapshot"><b>source</b> Create disk by cloning snapshot</dt>
<dd>

</dd>
<dt id="size_gb-New-disk-size"><b>size_gb</b> New disk size</dt>
<dd>

</dd>
<dt id="tags-Additional-tags-to-add-to-the-disk-resource.-key-value-pairs-must-be-separated-by-empty-space.-Example:-az_disk_create-tags-some_tag-some_value-another_tag-another_value"><b>tags</b> Additional tags to add to the disk resource. key=value pairs must be separated by empty space. Example: az_disk_create(tags=&gt;&quot;some_tag=some_value another_tag=another_value&quot;)</dt>
<dd>

</dd>
</dl>

<h2 id="az_resource_delete">az_resource_delete</h2>

<pre><code>az_resource_delete(resource_group=&gt;$resource_group, name=&gt;$name);</code></pre>

<p>Deletes resource from specified resource group. Single resource can be deleted by specifying <b>name</b> or list of resource IDs delimited by empty space using argument <b>ids</b>. Arguments <b>name</b> and <b>ids</b> are mutually exclusive.</p>

<dl>

<dt id="resource_group-Existing-resource-group-name1"><b>resource_group</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="name-Name-of-the-resource-to-delete"><b>name</b> Name of the resource to delete</dt>
<dd>

</dd>
<dt id="ids-list-of-resource-IDs-to-delete"><b>ids</b> list of resource IDs to delete</dt>
<dd>

</dd>
<dt id="timeout-Timeout-for-az-command.-Default:-60"><b>timeout</b> Timeout for az command. Default: 60</dt>
<dd>

</dd>
</dl>

<h2 id="az_validate_uuid_pattern">az_validate_uuid_pattern</h2>

<pre><code>az_validate_uuid_pattern( uuid =&gt; $uuid_string )

Function checks input string against uuid pattern
which is commonly used as an identifier for Azure resources.
returns uuid (true) on match, 0 (false) on mismatch.</code></pre>

<dl>

<dt id="uuid-UUID-string-to-test"><b>uuid</b> UUID string to test.</dt>
<dd>

</dd>
</dl>


</body>

</html>



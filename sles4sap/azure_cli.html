<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/sles4sap/azure_cli.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='../style.css' />
</head>

<body>



<ul id="index"><li><a href="../index.html"><i>&lt;= Back to file list</i></a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a>
    <ul>
      <li><a href="#az_version">az_version</a></li>
      <li><a href="#az_group_create">az_group_create</a></li>
      <li><a href="#az_group_name_get">az_group_name_get</a></li>
      <li><a href="#az_group_delete">az_group_delete</a></li>
      <li><a href="#az_group_exists">az_group_exists</a></li>
      <li><a href="#az_network_vnet_create">az_network_vnet_create</a></li>
      <li><a href="#az_network_vnet_subnet_update">az_network_vnet_subnet_update</a>
        <ul>
          <li><a href="#az_network_vnet_get">az_network_vnet_get</a></li>
        </ul>
      </li>
      <li><a href="#az_network_nsg_create">az_network_nsg_create</a></li>
      <li><a href="#az_network_nsg_rule_create">az_network_nsg_rule_create</a></li>
      <li><a href="#az_network_publicip_create">az_network_publicip_create</a></li>
      <li><a href="#az_network_publicip_get">az_network_publicip_get</a></li>
      <li><a href="#az_network_nat_gateway_create">az_network_nat_gateway_create</a></li>
      <li><a href="#az_network_lb_create">az_network_lb_create</a></li>
      <li><a href="#az_network_lb_probe_create">az_network_lb_probe_create</a></li>
      <li><a href="#az_network_lb_rule_create">az_network_lb_rule_create</a></li>
      <li><a href="#az_vm_as_create">az_vm_as_create</a></li>
      <li><a href="#az_vm_as_list">az_vm_as_list</a></li>
      <li><a href="#az_vm_as_show">az_vm_as_show</a></li>
      <li><a href="#az_img_from_vhd_create">az_img_from_vhd_create</a></li>
      <li><a href="#az_vm_create">az_vm_create</a></li>
      <li><a href="#az_vm_list">az_vm_list</a></li>
      <li><a href="#az_vm_instance_view_get">az_vm_instance_view_get</a></li>
      <li><a href="#az_vm_wait_running">az_vm_wait_running</a></li>
      <li><a href="#az_vm_openport">az_vm_openport</a></li>
      <li><a href="#az_vm_wait_cloudinit">az_vm_wait_cloudinit</a></li>
      <li><a href="#az_nic_get_id">az_nic_get_id</a></li>
      <li><a href="#az_nic_create">az_nic_create</a></li>
      <li><a href="#az_nic_get">az_nic_get</a></li>
      <li><a href="#az_nic_name_get">az_nic_name_get</a></li>
      <li><a href="#az_nic_list">az_nic_list</a></li>
      <li><a href="#az_ipconfig_name_get">az_ipconfig_name_get</a></li>
      <li><a href="#az_ipconfig_update">az_ipconfig_update</a></li>
      <li><a href="#az_ipconfig_delete">az_ipconfig_delete</a></li>
      <li><a href="#az_ipconfig_pool_add">az_ipconfig_pool_add</a></li>
      <li><a href="#az_vm_diagnostic_log_enable">az_vm_diagnostic_log_enable</a></li>
      <li><a href="#az_vm_diagnostic_log_get">az_vm_diagnostic_log_get</a></li>
      <li><a href="#az_vm_identity_assign">az_vm_identity_assign</a></li>
      <li><a href="#az_storage_account_create">az_storage_account_create</a></li>
      <li><a href="#az_network_peering_create">az_network_peering_create</a></li>
      <li><a href="#az_network_peering_list">az_network_peering_list</a></li>
      <li><a href="#az_network_peering_delete">az_network_peering_delete</a></li>
      <li><a href="#az_network_peering_exists">az_network_peering_exists</a></li>
      <li><a href="#az_disk_create">az_disk_create</a></li>
      <li><a href="#az_resource_delete">az_resource_delete</a></li>
      <li><a href="#az_resource_list">az_resource_list</a></li>
      <li><a href="#az_validate_uuid_pattern">az_validate_uuid_pattern</a></li>
      <li><a href="#az_storage_blob_upload">az_storage_blob_upload</a></li>
      <li><a href="#az_storage_blob_lease_acquire">az_storage_blob_lease_acquire</a></li>
      <li><a href="#az_storage_blob_list">az_storage_blob_list</a></li>
      <li><a href="#az_storage_blob_update">az_storage_blob_update</a></li>
      <li><a href="#az_keyvault_list">az_keyvault_list</a></li>
      <li><a href="#az_keyvault_secret_list">az_keyvault_secret_list</a></li>
      <li><a href="#az_keyvault_secret_show">az_keyvault_secret_show</a></li>
      <li><a href="#az_network_vnet_show">az_network_vnet_show</a></li>
      <li><a href="#az_network_dns_zone_create">az_network_dns_zone_create</a></li>
      <li><a href="#az_network_dns_zone_delete">az_network_dns_zone_delete</a></li>
      <li><a href="#az_network_dns_zone_list">az_network_dns_zone_list</a></li>
      <li><a href="#az_network_dns_add_record">az_network_dns_add_record</a></li>
      <li><a href="#az_network_dns_link_create">az_network_dns_link_create</a></li>
      <li><a href="#az_network_dns_link_delete">az_network_dns_link_delete</a></li>
      <li><a href="#az_network_dns_link_list">az_network_dns_link_list</a></li>
      <li><a href="#az_network_dns_links_cleanup">az_network_dns_links_cleanup</a></li>
      <li><a href="#az_network_dns_zones_cleanup">az_network_dns_zones_cleanup</a></li>
      <li><a href="#az_account_show">az_account_show</a></li>
      <li><a href="#"></a></li>
    </ul>
  </li>
</ul><h1>lib/sles4sap/azure_cli.pm</h1>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>Library to compose and run Azure cli commands</p>

<h2 id="az_version">az_version</h2>

<pre><code>az_version();</code></pre>

<p>Print the version of the az cli available on system</p>

<h2 id="az_group_create">az_group_create</h2>

<pre><code>az_group_create(
    name =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;);</code></pre>

<p>Create an Azure resource group in a specific region</p>

<dl>

<dt id="name---full-name-of-the-resource-group"><b>name</b> - full name of the resource group</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-resource-group"><b>region</b> - Azure region where to create the resource group</dt>
<dd>

</dd>
</dl>

<h2 id="az_group_name_get">az_group_name_get</h2>

<pre><code>my $ret = az_group_name_get();</code></pre>

<p>Get the name of all existing Resource Group in the current subscription. By default the output is an array of strings. Output can be modified using <b>$args{query}</b>.</p>

<dl>

<dt id="query---Modify-output-filter-using-jmespath-query.-Default:-.name"><b>query</b> - Modify output filter using jmespath query. Default: &#39;[].name&#39;</dt>
<dd>

</dd>
</dl>

<h2 id="az_group_delete">az_group_delete</h2>

<pre><code>az_group_delete( name =&gt; &#39;openqa-rg&#39; );</code></pre>

<p>Delete a resource group with a specific name</p>

<dl>

<dt id="name---full-name-of-the-resource-group1"><b>name</b> - full name of the resource group</dt>
<dd>

</dd>
<dt id="timeout---timeout-default-60"><b>timeout</b> - timeout, default 60</dt>
<dd>

</dd>
</dl>

<h2 id="az_group_exists">az_group_exists</h2>

<pre><code>az_group_exists(name =&gt; &#39;resource group name&#39; [, quiet=&gt;&#39;pssst!&#39;]);</code></pre>

<p>Check if specified resource group exists. Returns whatever &#39;az group exist&#39; is returning that usually is string <b>true</b> or <b>false</b>.</p>

<dl>

<dt id="name-Resource-group-name"><b>name</b> Resource group name</dt>
<dd>

</dd>
<dt id="quiet-Turn-off-script_output-verbosity-if-defined"><b>quiet</b> Turn off script_output verbosity if defined</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_vnet_create">az_network_vnet_create</h2>

<pre><code>az_network_vnet_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    vnet =&gt; &#39;openqa-vnet&#39;,
    snet =&gt; &#39;openqa-subnet&#39;,
    address_prefixes =&gt; &#39;10.0.1.0/16&#39;,
    subnet_prefixes =&gt; &#39;10.0.1.0/24&#39;)</code></pre>

<p>Create a virtual network</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-network"><b>resource_group</b> - existing resource group where to create the network</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-VNET"><b>region</b> - Azure region where to create the VNET</dt>
<dd>

</dd>
<dt id="vnet---name-of-the-virtual-network"><b>vnet</b> - name of the virtual network</dt>
<dd>

</dd>
<dt id="snet---name-of-the-subnet"><b>snet</b> - name of the subnet</dt>
<dd>

</dd>
<dt id="address_prefixes---virtual-network-ip-address-space.-Default-192.168.0.0-16"><b>address_prefixes</b> - virtual network ip address space. Default 192.168.0.0/16</dt>
<dd>

</dd>
<dt id="subnet_prefixes---subnet-ip-address-space.-Default-192.168.0.0-24"><b>subnet_prefixes</b> - subnet ip address space. Default 192.168.0.0/24</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_vnet_subnet_update">az_network_vnet_subnet_update</h2>

<pre><code>az_network_vnet_subnet_update(
    resource_group =&gt; &#39;openqa-rg&#39;,
    vnet =&gt; &#39;openqa-vnet&#39;,
    snet =&gt; &#39;openqa-subnet&#39;,
    nat_gateway =&gt; &#39;openqa-nat&#39;)</code></pre>

<p>Update a Subnet</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-network1"><b>resource_group</b> - existing resource group where to create the network</dt>
<dd>

</dd>
<dt id="vnet---name-of-the-virtual-network1"><b>vnet</b> - name of the virtual network</dt>
<dd>

</dd>
<dt id="snet---name-of-the-subnet1"><b>snet</b> - name of the subnet</dt>
<dd>

</dd>
<dt id="nat_gateway---optional-argument-if-provided-the-update-is-about-associating-a-Subnet-th-a-NAT-gateway"><b>nat_gateway</b> - optional argument, if provided the update is about associating a Subnet th a NAT gateway</dt>
<dd>

</dd>
</dl>

<h3 id="az_network_vnet_get">az_network_vnet_get</h3>

<pre><code>my $res = az_network_vnet_get(resource_group =&gt; &#39;openqa-rg&#39;)</code></pre>

<p>Return the output of az network vnet list as an object. Take care that this command is always calling the az cli with --json and returns the decoded object. But the format of the object can change accordingly to the provided value of --query. It is also possible that some query result in the function to die on decode_json.</p>

<dl>

<dt id="resource_group---resource-group-name-to-query"><b>resource_group</b> - resource group name to query</dt>
<dd>

</dd>
<dt id="query---valid-jmespath-https:-jmespath.org"><b>query</b> - valid jmespath https://jmespath.org/</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_nsg_create">az_network_nsg_create</h2>

<pre><code>az_network_nsg_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-nsg&#39;)</code></pre>

<p>Create a network security group</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-NSG"><b>resource_group</b> - existing resource group where to create the NSG</dt>
<dd>

</dd>
<dt id="name---security-group-name"><b>name</b> - security group name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_nsg_rule_create">az_network_nsg_rule_create</h2>

<pre><code>az_network_nsg_rule_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    nsg =&gt; &#39;openqa-nsg&#39;,
    name =&gt; &#39;openqa-nsg-rule-ssh&#39;,
    port =&gt; 22)</code></pre>

<p>Create a very specific type of inbound rule for an existing network security group Just few parameters are configurable here, like the port number</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-NSG-rule"><b>resource_group</b> - existing resource group where to create the NSG rule</dt>
<dd>

</dd>
<dt id="nsg---existing-security-group-name"><b>nsg</b> - existing security group name</dt>
<dd>

</dd>
<dt id="name---security-rule-name"><b>name</b> - security rule name</dt>
<dd>

</dd>
<dt id="port---allowed-port"><b>port</b> - allowed port</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_publicip_create">az_network_publicip_create</h2>

<pre><code>az_network_publicip_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-pip&#39;,
    zone =&gt; &#39;1 2 3&#39;)</code></pre>

<p>Create an IPv4 public IP resource</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-PubIP"><b>resource_group</b> - existing resource group where to create the PubIP</dt>
<dd>

</dd>
<dt id="name---public-IP-resource-name"><b>name</b> - public IP resource name</dt>
<dd>

</dd>
<dt id="sku---default-Standard"><b>sku</b> - default Standard</dt>
<dd>

</dd>
<dt id="allocation_method---optionally-add---allocation-method"><b>allocation_method</b> - optionally add --allocation-method</dt>
<dd>

</dd>
<dt id="zone---optionally-add---zone"><b>zone</b> - optionally add --zone</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_publicip_get">az_network_publicip_get</h2>

<pre><code>az_network_publicip_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-pip&#39;)</code></pre>

<p>Return an IPv4 public IP address from its name</p>

<dl>

<dt id="resource_group---existing-resource-group-including-the-PubIP"><b>resource_group</b> - existing resource group including the PubIP</dt>
<dd>

</dd>
<dt id="name---existing-public-IP-resource-name"><b>name</b> - existing public IP resource name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_nat_gateway_create">az_network_nat_gateway_create</h2>

<pre><code>az_network_nat_gateway_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    name =&gt; &#39;openqa-nat-gateway&#39;,
    public_ip =&gt; &#39;openqa-pubip&#39;)</code></pre>

<p>Create a NAT Gateway</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-NAT-Gateway"><b>resource_group</b> - existing resource group where to create the NAT Gateway</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-NAT-Gateway"><b>region</b> - Azure region where to create the NAT Gateway</dt>
<dd>

</dd>
<dt id="name---NAT-Gateway-resource-name"><b>name</b> - NAT Gateway resource name</dt>
<dd>

</dd>
<dt id="public_ip---add-to-the-NAT-Gateway-a-public-IP"><b>public_ip</b> - add to the NAT Gateway a public IP</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_lb_create">az_network_lb_create</h2>

<pre><code>az_network_lb_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-lb&#39;,
    vnet =&gt; &#39;openqa-vnet&#39;,
    snet =&gt; &#39;openqa-subnet&#39;,
    backend =&gt; &#39;openqa-be&#39;,
    frontend_ip_name =&gt; &#39;openqa-feip&#39;,
    sku =&gt; &#39;Standard&#39;)</code></pre>

<p>Create a load balancer entity. LB is mostly &quot;just&quot; a &quot;group&quot; definition to link back-end and front-end resources (usually an IP)</p>

<p>SKU Standard (and not Basic) is needed to get some Metrics</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-lb"><b>resource_group</b> - existing resource group where to create lb</dt>
<dd>

</dd>
<dt id="name---load-balancer-name"><b>name</b> - load balancer name</dt>
<dd>

</dd>
<dt id="vnet---existing-Virtual-network-name-where-to-create-LB-in"><b>vnet</b> - existing Virtual network name where to create LB in</dt>
<dd>

</dd>
<dt id="snet---existing-Subnet-network-name-where-to-create-LB-in"><b>snet</b> - existing Subnet network name where to create LB in</dt>
<dd>

</dd>
<dt id="backend---name-to-assign-to-created-backend-pool"><b>backend</b> - name to assign to created backend pool</dt>
<dd>

</dd>
<dt id="frontend_ip_name---name-to-assign-to-created-frontend-ip-will-be-reused-in-az-network-lb-rule-create"><b>frontend_ip_name</b> - name to assign to created frontend ip, will be reused in &quot;az network lb rule create&quot;</dt>
<dd>

</dd>
<dt id="sku---default-Basic"><b>sku</b> - default Basic</dt>
<dd>

</dd>
<dt id="fip---optionally-add---private-ip-address"><b>fip</b> - optionally add --private-ip-address</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_lb_probe_create">az_network_lb_probe_create</h2>

<pre><code>az_network_lb_probe_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    lb_name =&gt; &#39;openqa-lb&#39;,
    name =&gt; &#39;openqa-lb-hp&#39;,
    port =&gt; &#39;4242&#39;,
    protocol =&gt; &#39;Udp&#39;,
    )</code></pre>

<p>Create a load balancer health probe.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-lb-probe"><b>resource_group</b> - existing resource group where to create lb probe</dt>
<dd>

</dd>
<dt id="lb_name---existing-load-balancer-name"><b>lb_name</b> - existing load balancer name</dt>
<dd>

</dd>
<dt id="name---name-for-the-new-health-probe"><b>name</b> - name for the new health probe</dt>
<dd>

</dd>
<dt id="port---port-number-monitored-by-the-health-probe"><b>port</b> - port number monitored by the health probe</dt>
<dd>

</dd>
<dt id="protocol---protocol-for-the-health-probe.-Default-Tcp"><b>protocol</b> - protocol for the health probe. Default Tcp</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_lb_rule_create">az_network_lb_rule_create</h2>

<pre><code>az_network_lb_rule_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    lb_name =&gt; &#39;openqa-lb&#39;,
    hp_name =&gt; &#39;openqa-hb&#39;,
    frontend_ip =&gt; &#39;openqa-fe&#39;,
    backend =&gt; &#39;openqa-be&#39;,
    name =&gt; &#39;openqa-lb-rule&#39;,
    port =&gt; &#39;80&#39;
    )</code></pre>

<p>Configure the load balancer behavior.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-lb-rule"><b>resource_group</b> - existing resource group where to create lb rule</dt>
<dd>

</dd>
<dt id="lb_name---existing-load-balancer-name1"><b>lb_name</b> - existing load balancer name</dt>
<dd>

</dd>
<dt id="hp_name---existing-load-balancer-health-probe-name"><b>hp_name</b> - existing load balancer health probe name</dt>
<dd>

</dd>
<dt id="frontend_ip---existing-load-balancer-front-end-IP-name"><b>frontend_ip</b> - existing load balancer front end IP name</dt>
<dd>

</dd>
<dt id="backend---existing-load-balancer-back-end-pool-name"><b>backend</b> - existing load balancer back end pool name</dt>
<dd>

</dd>
<dt id="name---name-for-the-new-load-balancer-rule"><b>name</b> - name for the new load balancer rule</dt>
<dd>

</dd>
<dt id="port---port-mapped-between-the-frontend-and-the-backend.-This-poor-Perl-wrapper-map-them-1:1"><b>port</b> - port mapped between the frontend and the backend. This poor Perl wrapper map them 1:1</dt>
<dd>

</dd>
<dt id="protocol---protocol-for-the-load-balancer-rule.-Default-Tcp"><b>protocol</b> - protocol for the load balancer rule. Default Tcp</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_as_create">az_vm_as_create</h2>

<pre><code>az_vm_as_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    name =&gt; &#39;openqa-as&#39;,
    fault_count =&gt; 2)</code></pre>

<p>Create an availability set. Later on VM can be assigned to it.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-availability-set"><b>resource_group</b> - existing resource group where to create the availability set</dt>
<dd>

</dd>
<dt id="region---region-where-to-create-the-availability-set"><b>region</b> - region where to create the availability set</dt>
<dd>

</dd>
<dt id="name---availability-set-name"><b>name</b> - availability set name</dt>
<dd>

</dd>
<dt id="fault_count---value-for---platform-fault-domain-count"><b>fault_count</b> - value for --platform-fault-domain-count</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_as_list">az_vm_as_list</h2>

<pre><code>az_vm_as_list(resource_group =&gt; &#39;openqa-rg&#39;);</code></pre>

<p>List all availability set in a resource group.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-availability-set1"><b>resource_group</b> - existing resource group where to create the availability set</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_as_show">az_vm_as_show</h2>

<pre><code>az_vm_as_show(resource_group =&gt; &#39;openqa-rg&#39;, name =&gt; &#39;openqa-as&#39;);</code></pre>

<p>Show all the details of an availability set. For the moment it only show and does not return anything.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-availability-set2"><b>resource_group</b> - existing resource group where to create the availability set</dt>
<dd>

</dd>
<dt id="name---name-of-the-availability-set"><b>name</b> - name of the availability set</dt>
<dd>

</dd>
</dl>

<h2 id="az_img_from_vhd_create">az_img_from_vhd_create</h2>

<pre><code>az_img_from_vhd_create(resource_group =&gt; $rg, name =&gt; $name, source =&gt; $uploaded_vhd_url);</code></pre>

<p>Create an image out of a .vhd disk in Azure storage.</p>

<dl>

<dt id="resource_group---existing-resource-group"><b>resource_group</b> - existing resource group</dt>
<dd>

</dd>
<dt id="name---NAME-of-the-created-image"><b>name</b> - NAME of the created image</dt>
<dd>

</dd>
<dt id="source---URI-of-the-vhd-disk-from-which-the-image-will-be-created"><b>source</b> - URI of the vhd disk from which the image will be created</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_create">az_vm_create</h2>

<pre><code>az_vm_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;,
    name =&gt; &#39;openqa-vm&#39;,
    image =&gt; &#39;SUSE:sles-sap-15-sp5:gen2:latest&#39;)</code></pre>

<p>Create a virtual machine</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-VM"><b>resource_group</b> - existing resource group where to create the VM</dt>
<dd>

</dd>
<dt id="region---optional-region-where-to-create-the-VM"><b>region</b> - optional region where to create the VM</dt>
<dd>

</dd>
<dt id="name---virtual-machine-name"><b>name</b> - virtual machine name</dt>
<dd>

</dd>
<dt id="image---OS-image-name"><b>image</b> - OS image name</dt>
<dd>

</dd>
<dt id="attach_os_disk---argument-for---attach-os-disk"><b>attach_os_disk</b> - argument for --attach-os-disk</dt>
<dd>

</dd>
<dt id="os_type---OS-type"><b>os_type</b> - OS type</dt>
<dd>

</dd>
<dt id="vnet---optional-name-of-the-Virtual-Network-where-to-place-the-VM"><b>vnet</b> - optional name of the Virtual Network where to place the VM</dt>
<dd>

</dd>
<dt id="snet---optional-name-of-the-SubNet-where-to-connect-the-VM"><b>snet</b> - optional name of the SubNet where to connect the VM</dt>
<dd>

</dd>
<dt id="size---VM-size-default-Standard_B1s"><b>size</b> - VM size, default Standard_B1s</dt>
<dd>

</dd>
<dt id="availability_set---optional-inclusion-in-an-availability-set"><b>availability_set</b> - optional inclusion in an availability set</dt>
<dd>

</dd>
<dt id="username---optional-admin-username"><b>username</b> - optional admin username</dt>
<dd>

</dd>
<dt id="nsg---optional-inclusion-in-an-network-security-group"><b>nsg</b> - optional inclusion in an network security group</dt>
<dd>

</dd>
<dt id="nic---optional-add-to-the-VM-a-NIC-created-separately-with-az-network-nic-create"><b>nic</b> - optional add to the VM a NIC created separately with &#39;az network nic create&#39;</dt>
<dd>

</dd>
<dt id="public_ip---optional-add-to-the-VM-a-public-IP.-Value-like-is-a-valid-one-and-is-not-the-same-as-not-including-the-argument-at-all"><b>public_ip</b> - optional add to the VM a public IP. Value like &quot;&quot; is a valid one and is not the same as not including the argument at all.</dt>
<dd>

</dd>
<dt id="custom_data---optional-provide-a-cloud-init-script-file"><b>custom_data</b> - optional provide a cloud-init script file</dt>
<dd>

</dd>
<dt id="ssh_pubkey---optional-inclusion-in-an-availability-set-if-missing-the-command-is-configured-to-generate-one"><b>ssh_pubkey</b> - optional inclusion in an availability set, if missing the command is configured to generate one</dt>
<dd>

</dd>
<dt id="security_type---is-used-force-a-specific-value-for---security-type"><b>security_type</b> - is used force a specific value for &#39;--security-type&#39;</dt>
<dd>

</dd>
<dt id="timeout---timeout-of-command-execution-default-900"><b>timeout</b> - timeout of command execution, default 900</dt>
<dd>

</dd>
<dt id="tags---reference-to-a-list-of-tags-to-apply-to-the-VM"><b>tags</b> - reference to a list of tags to apply to the VM</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_list">az_vm_list</h2>

<pre><code>my $ret = az_vm_list(resource_group =&gt; &#39;openqa-rg&#39;, query =&gt; &#39;[].name&#39;);</code></pre>

<p>Get the info from all existing VMs within a Resource Group Return a decoded json hash according to the provided jmespath query</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-VMs"><b>resource_group</b> - existing resource group where to search for VMs</dt>
<dd>

</dd>
<dt id="query---valid-jmespath-https:-jmespath.org1"><b>query</b> - valid jmespath https://jmespath.org/</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_instance_view_get">az_vm_instance_view_get</h2>

<pre><code>my $res = az_vm_instance_view_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get some details of a specific VM</p>

<p>Json output of the az cli looks like:</p>

<p>[ { &quot;code&quot;: &quot;ProvisioningState/succeeded&quot;, &quot;displayStatus&quot;: &quot;Provisioning succeeded&quot;, &quot;level&quot;: &quot;Info&quot;, &quot;message&quot;: null, &quot;time&quot;: &quot;2025-12-09T13:50:39.894595+00:00&quot; }, { &quot;code&quot;: &quot;PowerState/running&quot;, &quot;displayStatus&quot;: &quot;VM running&quot;, &quot;level&quot;: &quot;Info&quot;, &quot;message&quot;: null, &quot;time&quot;: null } ]</p>

<p>Return value of this function is an arrray like</p>

<p>[ { &quot;code&quot;: &quot;ProvisioningState/succeeded&quot;, &quot;displayStatus&quot;: &quot;Provisioning succeeded&quot;, }, { &quot;code&quot;: &quot;PowerState/running&quot;, &quot;displayStatus&quot;: &quot;VM running&quot;, } ]</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-look-for-a-specific-VM"><b>resource_group</b> - existing resource group where to look for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-virtual-machine"><b>name</b> - name of an existing virtual machine</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_wait_running">az_vm_wait_running</h2>

<pre><code>my $res = az_vm_wait_running(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;,
    timeout =&gt; 300)</code></pre>

<p>Get the VM state until status looks like:</p>

<p>[ { &quot;code&quot;: &quot;ProvisioningState/succeeded&quot;, &quot;displayStatus&quot;: &quot;Provisioning succeeded&quot;, }, { &quot;code&quot;: &quot;PowerState/running&quot;, &quot;displayStatus&quot;: &quot;VM running&quot;, } ]</p>

<p>or reach timeout.</p>

<p>Polling frequency is dynamically calculated based on the timeout.</p>

<p>It returns the total ammount of time spent waiting or function kills the test on timeout.</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-look-for-a-specific-VM1"><b>resource_group</b> - existing resource group where to look for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-virtual-machine1"><b>name</b> - name of an existing virtual machine</dt>
<dd>

</dd>
<dt id="timeout---optional-default-300"><b>timeout</b> - optional, default 300</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_openport">az_vm_openport</h2>

<pre><code>az_vm_openport(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;,
    port =&gt; 80)</code></pre>

<p>Open a port on an existing VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-VM"><b>name</b> - name of an existing VM</dt>
<dd>

</dd>
<dt id="port---port-to-open"><b>port</b> - port to open</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_wait_cloudinit">az_vm_wait_cloudinit</h2>

<pre><code>az_vm_wait_cloudinit(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Wait cloud-init completion on a running VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM1"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-VM1"><b>name</b> - name of an existing VM</dt>
<dd>

</dd>
<dt id="username---username-default-cloudadmin"><b>username</b> - username default cloudadmin</dt>
<dd>

</dd>
<dt id="timeout---max-wait-time-in-seconds.-Default-3600"><b>timeout</b> - max wait time in seconds. Default 3600.</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_get_id">az_nic_get_id</h2>

<pre><code>my $nic_id = az_nic_get_id(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get the NIC ID of the first NIC of a given VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-NIC"><b>resource_group</b> - existing resource group where to search for a specific NIC</dt>
<dd>

</dd>
<dt id="name---name-of-an-existing-NIC"><b>name</b> - name of an existing NIC</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_create">az_nic_create</h2>

<p>Create a NIC</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-NIC1"><b>resource_group</b> - existing resource group where to search for a specific NIC</dt>
<dd>

</dd>
<dt id="name---name-for-the-NIC"><b>name</b> - name for the NIC</dt>
<dd>

</dd>
<dt id="vnet---existing-VNET"><b>vnet</b> - existing VNET</dt>
<dd>

</dd>
<dt id="subnet---existing-SUBNET"><b>subnet</b> - existing SUBNET</dt>
<dd>

</dd>
<dt id="nsg---existing-Network-security-group"><b>nsg</b> - existing Network security group</dt>
<dd>

</dd>
<dt id="pubip_name---existing-public-ip-name"><b>pubip_name</b> - existing public ip name</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_get">az_nic_get</h2>

<p>Get the NIC data from NIC ID using &#39;az network nic show&#39;</p>

<dl>

<dt id="nic_id---existing-NIC-ID-eg.-from-az_nic_get_id"><b>nic_id</b> - existing NIC ID (eg. from az_nic_get_id)</dt>
<dd>

</dd>
<dt id="filter---query-filter"><b>filter</b> - query filter</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_name_get">az_nic_name_get</h2>

<pre><code>my $nic_name = az_nic_name_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get the NIC name from NIC ID</p>

<dl>

<dt id="nic_id---existing-NIC-ID-eg.-from-az_nic_get_id1"><b>nic_id</b> - existing NIC ID (eg. from az_nic_get_id)</dt>
<dd>

</dd>
</dl>

<h2 id="az_nic_list">az_nic_list</h2>

<pre><code>az_nic_list(resource_group=&gt;&#39;resource group name&#39; [, query=&gt;&#39;[].name&#39;]);</code></pre>

<p>Returns <b>ARRAYREF</b> with all nic names located in resource group. Output can be modified using <b>$args{query}</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query.-Default:-value"><b>query</b> Modify output filter using jmespath query. Default: value</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_name_get">az_ipconfig_name_get</h2>

<pre><code>my $ipconfig_name = az_ipconfig_name_get(
    resource_group =&gt; &#39;openqa-rg&#39;,
    name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Get the name of the first IpConfig of a NIC from a NIC ID</p>

<dl>

<dt id="nic_id---existing-NIC-ID-eg.-from-az_nic_get_id2"><b>nic_id</b> - existing NIC ID (eg. from az_nic_get_id)</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_update">az_ipconfig_update</h2>

<pre><code>az_ipconfig_update(
    resource_group =&gt; &#39;openqa-rg&#39;,
    ipconfig_name =&gt; &#39;openqa-ipconfig&#39;,
    nic_name =&gt; &#39;openqa-nic&#39;,
    ip =&gt; &#39;192.168.0.42&#39;)</code></pre>

<p>Change the IpConfig to use a static IP</p>

<dl>

<dt id="resource_group---existing-resource-group1"><b>resource_group</b> - existing resource group</dt>
<dd>

</dd>
<dt id="ipconfig_name---existing-IP-configuration-NAME-eg.-from-az_ipconfig_name_get"><b>ipconfig_name</b> - existing IP configuration NAME (eg. from az_ipconfig_name_get)</dt>
<dd>

</dd>
<dt id="nic_name---existing-NIC-NAME-eg.-from-az_nic_name_get"><b>nic_name</b> - existing NIC NAME (eg. from az_nic_name_get)</dt>
<dd>

</dd>
<dt id="ip---IPv4-address-to-assign-as-static-IP"><b>ip</b> - IPv4 address to assign as static IP</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_delete">az_ipconfig_delete</h2>

<pre><code>az_ipconfig_delete(
    resource_group =&gt; &#39;openqa-rg&#39;,
    ipconfig_name =&gt; &#39;openqa-ipconfig&#39;,
    nic_name =&gt; &#39;openqa-nic&#39;)</code></pre>

<p>Delete a specific IpConfig to use a static IP</p>

<dl>

<dt id="resource_group---existing-resource-group2"><b>resource_group</b> - existing resource group</dt>
<dd>

</dd>
<dt id="ipconfig_name---existing-IP-configuration-NAME-eg.-from-az_ipconfig_name_get1"><b>ipconfig_name</b> - existing IP configuration NAME (eg. from az_ipconfig_name_get)</dt>
<dd>

</dd>
<dt id="nic_name---existing-NIC-NAME-eg.-from-az_nic_name_get1"><b>nic_name</b> - existing NIC NAME (eg. from az_nic_name_get)</dt>
<dd>

</dd>
</dl>

<h2 id="az_ipconfig_pool_add">az_ipconfig_pool_add</h2>

<pre><code>az_ipconfig_pool_add(
    resource_group =&gt; &#39;openqa-rg&#39;,
    lb_name =&gt; &#39;openqa-lb&#39;,
    address_pool =&gt; &#39;openqa-addr-pool&#39;,
    ipconfig_name =&gt; &#39;openqa-ipconfig&#39;,
    nic_name =&gt; &#39;openqa-nic&#39;)</code></pre>

<p>Add the IpConfig to a LB address pool</p>

<dl>

<dt id="resource_group---existing-resource-group3"><b>resource_group</b> - existing resource group</dt>
<dd>

</dd>
<dt id="lb_name---existing-Load-balancer-NAME"><b>lb_name</b> - existing Load balancer NAME</dt>
<dd>

</dd>
<dt id="address_pool---existing-Load-balancer-address-pool-name"><b>address_pool</b> - existing Load balancer address pool name</dt>
<dd>

</dd>
<dt id="timeout---timeout-default-601"><b>timeout</b> - timeout, default 60</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_diagnostic_log_enable">az_vm_diagnostic_log_enable</h2>

<pre><code>az_vm_diagnostic_log_enable(resource_group =&gt; &#39;openqa-rg&#39;,
                            storage_account =&gt; &#39;openqasa&#39;,
                            vm_name =&gt; &#39;openqa-vm&#39;)</code></pre>

<p>Enable diagnostic log for a specific VM</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM2"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
<dt id="storage_account---existing-storage-account"><b>storage_account</b> - existing storage account</dt>
<dd>

</dd>
<dt id="vm_name---existing-VM-name"><b>vm_name</b> - existing VM name</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_diagnostic_log_get">az_vm_diagnostic_log_get</h2>

<pre><code>my $list_of_logs = az_vm_diagnostic_log_get(resource_group =&gt; &#39;openqa-rg&#39;)</code></pre>

<p>Call `az vm boot-diagnostics json` for each running VM in the resource group associated to this openQA job</p>

<p>Return a list of diagnostic file paths on the JumpHost</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-search-for-a-specific-VM3"><b>resource_group</b> - existing resource group where to search for a specific VM</dt>
<dd>

</dd>
</dl>

<h2 id="az_vm_identity_assign">az_vm_identity_assign</h2>

<pre><code>az_vm_identity_assign(name=&gt;$vm_name,
    resource_group=&gt;$resource_group);

Enable managed service identity on the named VM.
It is first step to authenticate and interact with other Azure services.
Used in setup managed identity (MSI).
Return a validated systemAssignedIdentity ID or die.</code></pre>

<dl>

<dt id="name---VM-name"><b>name</b> - VM name</dt>
<dd>

</dd>
<dt id="resource_group---resource-group-resource-belongs-to"><b>resource_group</b> - resource group resource belongs to</dt>
<dd>

</dd>
</dl>

<h2 id="az_storage_account_create">az_storage_account_create</h2>

<pre><code>az_storage_account_create(
    resource_group =&gt; &#39;openqa-rg&#39;,
    region =&gt; &#39;westeurope&#39;
    name =&gt; &#39;openqasa&#39;)</code></pre>

<p>Create a storage account</p>

<dl>

<dt id="resource_group---existing-resource-group-where-to-create-the-storage-account"><b>resource_group</b> - existing resource group where to create the storage account</dt>
<dd>

</dd>
<dt id="region---Azure-region-where-to-create-the-storage"><b>region</b> - Azure region where to create the storage</dt>
<dd>

</dd>
<dt id="name---name-for-the-storage-account-to-be-created.-Storage-account-name-must-be-between-3-and-24-characters-in-length-and-use-numbers-and-lower-case-letters-only"><b>name</b> - name for the storage account to be created. Storage account name must be between 3 and 24 characters in length and use numbers and lower-case letters only.</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_create">az_network_peering_create</h2>

<pre><code>az_network_peering_create(
    name =&gt; &#39;openqa-fromVNET-toVNET&#39;,
    source_rg =&gt; &#39;openqa-rg&#39;,
    source_vnet =&gt; &#39;openqa-this-vnet&#39;,
    target_rg =&gt; &#39;openqa-rg&#39;,
    target_vnet =&gt; &#39;openqa-this-vnet&#39;)</code></pre>

<p>Create network peering</p>

<dl>

<dt id="name---NAME-for-the-network-peering-to-create"><b>name</b> - NAME for the network peering to create</dt>
<dd>

</dd>
<dt id="source_rg---existing-resource-group-that-contain-vnet-source-of-the-peering"><b>source_rg</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="source_vnet---existing-vnet-in-source_rg-used-as-source-of-the-peering"><b>source_vnet</b> - existing vnet in source_rg, used as source of the peering</dt>
<dd>

</dd>
<dt id="target_rg---existing-resource-group-that-contain-vnet-target-of-the-peering"><b>target_rg</b> - existing resource group that contain vnet target of the peering</dt>
<dd>

</dd>
<dt id="target_vnet---existing-vnet-in-target_rg-used-as-target-of-the-peering"><b>target_vnet</b> - existing vnet in target_rg, used as target of the peering</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_list">az_network_peering_list</h2>

<pre><code>my $res = az_network_peering_list(
    resource_group =&gt; &#39;openqa-rg&#39;,
    vnet =&gt; &#39;openqa-this-vnet&#39; [, query=&gt;&#39;[].name&#39;])</code></pre>

<p>Return HASH representing existing net peering</p>

<dl>

<dt id="resource_group---existing-resource-group-that-contain-vnet-source-of-the-peering"><b>resource_group</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="vnet---existing-vnet-in-resource_group-used-as-source-of-the-peering"><b>vnet</b> - existing vnet in resource_group, used as source of the peering</dt>
<dd>

</dd>
<dt id="query---valid-jmespath-https:-jmespath.org2"><b>query</b> - valid jmespath https://jmespath.org/</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_delete">az_network_peering_delete</h2>

<pre><code>az_network_peering_delete(
    name =&gt; &#39;openqa-fromVNET-toVNET&#39;,
    resource_group =&gt; &#39;openqa-rg&#39;,
    vnet =&gt; &#39;openqa-this-vnet&#39;)</code></pre>

<p>Delete a specific network peering</p>

<dl>

<dt id="name---name-of-the-existing-the-network-peering-to-delete"><b>name</b> - name of the existing the network peering to delete</dt>
<dd>

</dd>
<dt id="resource_group---existing-resource-group-that-contain-vnet-source-of-the-peering1"><b>resource_group</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="vnet---existing-vnet-in-resource_group-used-as-source-of-the-peering1"><b>vnet</b> - existing vnet in resource_group, used as source of the peering</dt>
<dd>

</dd>
<dt id="timeout---Optional-Timeout-for-the-assert_script_run-command"><b>timeout</b> - (Optional) Timeout for the assert_script_run command</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_peering_exists">az_network_peering_exists</h2>

<pre><code>az_network_peering_exists(resource_group=&gt;&#39;openqa-rg&#39;, vnet=&gt;&#39;openqa-this-vnet&#39;, name=&gt;&#39;openqa-fromVNET-toVNET&#39;);</code></pre>

<p>Returns 1 (true) if peering resource exists, 0 (false) if it was not found.</p>

<dl>

<dt id="resource_group---existing-resource-group-that-contain-vnet-source-of-the-peering2"><b>resource_group</b> - existing resource group that contain vnet source of the peering</dt>
<dd>

</dd>
<dt id="vnet---existing-vnet-in-resource_group-used-as-source-of-the-peering2"><b>vnet</b> - existing vnet in resource_group, used as source of the peering</dt>
<dd>

</dd>
<dt id="name---name-of-the-existing-the-network-peering-to-search-for"><b>name</b> - name of the existing the network peering to search for</dt>
<dd>

</dd>
</dl>

<h2 id="az_disk_create">az_disk_create</h2>

<pre><code>az_disk_create(resource_group=&gt;$resource_group, name=&gt;$name
    [, size_gb=&gt;60, source=$source, tags=&quot;tag1=value1 tag2=value2&quot;]);</code></pre>

<p>Creates new disk device either by specifying <b>size_gb</b> or by cloning another disk device using argument <b>source</b>. Arguments <b>size_gb</b> and <b>source</b> are mutually exclusive.</p>

<dl>

<dt id="name-New-disk-name"><b>name</b> New disk name</dt>
<dd>

</dd>
<dt id="resource_group-Existing-resource-group-name"><b>resource_group</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="source-Create-disk-by-cloning-snapshot"><b>source</b> Create disk by cloning snapshot</dt>
<dd>

</dd>
<dt id="size_gb-New-disk-size"><b>size_gb</b> New disk size</dt>
<dd>

</dd>
<dt id="tags-Additional-tags-to-add-to-the-disk-resource.-key-value-pairs-must-be-separated-by-empty-space.-Example:-az_disk_create-tags-some_tag-some_value-another_tag-another_value"><b>tags</b> Additional tags to add to the disk resource. key=value pairs must be separated by empty space. Example: az_disk_create(tags=&gt;&quot;some_tag=some_value another_tag=another_value&quot;)</dt>
<dd>

</dd>
</dl>

<h2 id="az_resource_delete">az_resource_delete</h2>

<pre><code>az_resource_delete(resource_group=&gt;$resource_group, name=&gt;$name);</code></pre>

<p>Deletes resource from specified resource group. Single resource can be deleted by specifying <b>name</b> or list of resource IDs delimited by empty space using argument <b>ids</b>. Arguments <b>name</b> and <b>ids</b> are mutually exclusive. Function returns `az` command exit code.</p>

<dl>

<dt id="resource_group-Existing-resource-group-name1"><b>resource_group</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="name-Name-of-the-resource-to-delete"><b>name</b> Name of the resource to delete</dt>
<dd>

</dd>
<dt id="ids-list-of-resource-IDs-to-delete"><b>ids</b> list of resource IDs to delete</dt>
<dd>

</dd>
<dt id="verbose-Turn-on-az-command-verbosity.-Default:-off"><b>verbose</b> Turn on az command verbosity. Default: off</dt>
<dd>

</dd>
<dt id="timeout-Timeout-for-az-command.-Default:-60"><b>timeout</b> Timeout for az command. Default: 60</dt>
<dd>

</dd>
</dl>

<h2 id="az_resource_list">az_resource_list</h2>

<pre><code>az_resource_list([resource_group=&gt;$resource_group, query=&gt;$query, output=&gt;$output]);</code></pre>

<p>Lists existing az resources based on arguments provided. Calling function without any argument returns full information from all existing resource groups. Returns decoded json structure if json format is requested, otherwise whole output is a string.</p>

<dl>

<dt id="resource_group-Existing-resource-group-name2"><b>resource_group</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="query-Jmespath-query"><b>query</b> Jmespath query</dt>
<dd>

</dd>
</dl>

<h2 id="az_validate_uuid_pattern">az_validate_uuid_pattern</h2>

<pre><code>my $is_valid = az_validate_uuid_pattern(uuid =&gt; $uuid_string);

Validates if a given string matches the standard UUID pattern (e.g.,
C&lt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&gt;). This is commonly used to verify
identifiers for Azure resources.</code></pre>

<p><b>Return value:</b></p>

<ul>

<li><p>On a successful match, returns the original <b>scalar string</b> containing the UUID. This value is considered true in a boolean context.</p>

</li>
<li><p>On a failed match, returns <b>undef</b>. This value is considered false in a boolean context.</p>

</li>
</ul>

<p><b>Arguments:</b></p>

<dl>

<dt id="uuid-UUID-string-to-test"><b>uuid</b> UUID string to test.</dt>
<dd>

</dd>
</dl>

<h2 id="az_storage_blob_upload">az_storage_blob_upload</h2>

<pre><code>az_storage_blob_upload(
    container_name=&gt;&#39;somecontainer&#39;,
    storage_account_name=&gt;&#39;storageaccount&#39;,
    file=&gt;&#39;somefilename&#39; [, timeout=&gt;42]);</code></pre>

<p>Uploads file to a storage container.</p>

<dl>

<dt id="container_name-Existing-storage-container-name"><b>container_name</b> Existing storage container name.</dt>
<dd>

</dd>
<dt id="storage_account_name-Storage-account-name"><b>storage_account_name</b> Storage account name.</dt>
<dd>

</dd>
<dt id="file-File-to-upload"><b>file</b> File to upload.</dt>
<dd>

</dd>
<dt id="timeout-Timeout-for-az-command.-Default:-90s"><b>timeout</b> Timeout for az command. Default: 90s</dt>
<dd>

</dd>
</dl>

<h2 id="az_storage_blob_lease_acquire">az_storage_blob_lease_acquire</h2>

<pre><code>my $lease_id = az_storage_blob_lease_acquire(
    container_name       =&gt; &#39;somecontainer&#39;,
    storage_account_name =&gt; &#39;storageaccount&#39;,
    blob_name            =&gt; &#39;somefilename&#39;,
    lease_duration       =&gt; 60
);</code></pre>

<p>Acquire a lease for a storage blob. The function returns a UUID which is then required to modify the file and gives the UUID owner exclusive rights.</p>

<p>If the lease cannot be acquired (e.g., the blob is already leased by another process, or another Azure error occurs), the function will return <code>undef</code>.</p>

<p><b>Return value:</b></p>

<ul>

<li><p>On success, returns a <b>scalar string</b> containing the lease UUID.</p>

</li>
<li><p>On failure, returns <b>undef</b>. The reasons may vary and it is up to caller to decide how to deal with the result. Possible reasons are that there is already a lease present (az cli returns a message which is not a valid UUID)</p>

</li>
</ul>

<dl>

<dt id="container_name-Existing-storage-container-name1"><b>container_name</b> Existing storage container name.</dt>
<dd>

</dd>
<dt id="storage_account_name-Storage-account-name1"><b>storage_account_name</b> Storage account name.</dt>
<dd>

</dd>
<dt id="blob_name-Blob-name-to-acquire-lease-for"><b>blob_name</b> Blob name to acquire lease for.</dt>
<dd>

</dd>
<dt id="lease_duration-Specifies-the-duration-of-the-lease-in-seconds.-A-non-infinite-lease-can-be-between-15-and-60-seconds.-A-value-of--1-indicates-an-infinite-lease.-Default:--1-infinite"><b>lease_duration</b> Specifies the duration of the lease in seconds. A non-infinite lease can be between 15 and 60 seconds. A value of -1 indicates an infinite lease. Default: -1 (infinite).</dt>
<dd>

</dd>
</dl>

<h2 id="az_storage_blob_list">az_storage_blob_list</h2>

<pre><code>az_storage_blob_list(
    container_name=&gt;&#39;somecontainer&#39;,
    storage_account_name=&gt;&#39;storageaccount&#39; [, query=&gt;&#39;[].name&#39;]
);</code></pre>

<p>List information about storage blob(s) specified by <b>storage_account_name</b>, <b>container_name</b> and <b>query</b>.</p>

<dl>

<dt id="container_name-Existing-storage-container-name2"><b>container_name</b> Existing storage container name.</dt>
<dd>

</dd>
<dt id="storage_account_name-Storage-account-name2"><b>storage_account_name</b> Storage account name.</dt>
<dd>

</dd>
<dt id="query-Query-in-jmespath-format"><b>query</b> Query in jmespath format</dt>
<dd>

</dd>
</dl>

<h2 id="az_storage_blob_update">az_storage_blob_update</h2>

<pre><code>az_storage_blob_update(container_name=&gt;&#39;container&#39;, account_name=&gt;&#39;stuff&#39;, name=&#39;blobby&#39; [, lease_id=42]);</code></pre>

<p>Update properties of storage blob. Returns az cli command exit code.</p>

<dl>

<dt id="container_name-Existing-resource-group-name"><b>container_name</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="account_name-Name-of-the-resource-to-delete"><b>account_name</b> Name of the resource to delete</dt>
<dd>

</dd>
<dt id="name-Blob-name"><b>name</b> Blob name</dt>
<dd>

</dd>
<dt id="lease_id-Lease-id-in-case-there-is-a-lease-put-on-a-file"><b>lease_id</b> Lease id in case there is a lease put on a file</dt>
<dd>

</dd>
</dl>

<h2 id="az_keyvault_list">az_keyvault_list</h2>

<pre><code>az_keyvault_list(resource_group=&gt;&#39;resource group&#39; [, query=&gt;&#39;[].id&#39;]);</code></pre>

<p>Lists all keyvault resource names located in specified resource group. Output can be modified using <b>query</b> argument.</p>

<dl>

<dt id="resource_group-Existing-resource-group-name3"><b>resource_group</b> Existing resource group name.</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query"><b>query</b> Modify output filter using jmespath query</dt>
<dd>

</dd>
</dl>

<h2 id="az_keyvault_secret_list">az_keyvault_secret_list</h2>

<pre><code>az_keyvault_secret_list(vault_name=&gt;&#39;Gringotts&#39; [, query=&gt;&#39;[].id&#39;]);</code></pre>

<p>Lists all keyvault secret names located in specified keyvault. Output can be modified using <b>query</b> argument.</p>

<dl>

<dt id="vault_name-Existing-keyvault-name"><b>vault_name</b> Existing keyvault name.</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query1"><b>query</b> Modify output filter using jmespath query</dt>
<dd>

</dd>
</dl>

<h2 id="az_keyvault_secret_show">az_keyvault_secret_show</h2>

<pre><code>az_keyvault_secret_show(id=&gt;&#39;someid&#39;
    [, name=&gt;&#39;Vault 713&#39;, vault_name=&gt;&#39;Gringotts&#39;, query=&gt;&#39;[].id&#39;, output=&gt;&#39;json&#39;, save_to_file=&gt;&#39;/alohomora&#39;]);</code></pre>

<p>Lists all keyvault secret names located in specified keyvault. Output can be modified using <b>query</b> argument.</p>

<dl>

<dt id="id-Existing-secret-resource-ID.-name-and-vault_name-not-needed-if-this-is-specified"><b>id</b> Existing secret resource ID. <b>name</b> and <b>vault_name</b> not needed if this is specified.</dt>
<dd>

</dd>
<dt id="name-Existing-secret-name.-Required-if-id-not-used"><b>name</b> Existing secret name. Required if <b>id</b> not used.</dt>
<dd>

</dd>
<dt id="vault_name-Existing-keyvault-name.-Required-if-id-not-used"><b>vault_name</b> Existing keyvault name. Required if <b>id</b> not used.</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query.-Default:-value1"><b>query</b> Modify output filter using jmespath query. Default: value</dt>
<dd>

</dd>
<dt id="output-Output-format.-Allowed-values:-json-tsv.-Default:-tsv"><b>output</b> Output format. Allowed values: json, tsv. Default: tsv.</dt>
<dd>

</dd>
<dt id="save_to_file-Save-output-to-a-file-specified.-This-can-be-used-to-prevent-the-secret-being-shown-in-OpenQA-outputs.-Default:-undefined-false"><b>save_to_file</b> Save output to a file specified. This can be used to prevent the secret being shown in OpenQA outputs. Default: undefined/false</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_vnet_show">az_network_vnet_show</h2>

<pre><code>az_network_vnet_show(resource_group=&gt;&#39;resource group name&#39;, name=&gt;&#39;vnet01&#39; [, query=&gt;&#39;[].name&#39;]);</code></pre>

<p>Returns <b>HASHREF</b> with all NIC names located in resource group. Output can be modified using <b>$args{query}</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name1"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="name-VNET-name"><b>name</b> VNET name</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query.-Default:-undefined"><b>query</b> Modify output filter using jmespath query. Default: undefined</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_zone_create">az_network_dns_zone_create</h2>

<pre><code>az_network_dns_zone_create(resource_group=&gt;&#39;resource group name&#39;, name=&gt;&#39;default.com&#39;);</code></pre>

<p>Creates private DNS zone within specified <b>resource_group</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name2"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="name-Private-DNS-zone-name"><b>name</b> Private DNS zone name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_zone_delete">az_network_dns_zone_delete</h2>

<pre><code>az_network_dns_zone_delete(resource_group=&gt;&#39;resource group name&#39;, zone_name=&gt;&#39;default.com&#39;);</code></pre>

<p>Deletes private DNS zone within <b>resource_group</b> specified by <b>zone_name</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name3"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="zone_name-Private-DNS-zone-name"><b>zone_name</b> Private DNS zone name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_zone_list">az_network_dns_zone_list</h2>

<pre><code>az_network_dns_zone_list(resource_group=&gt;&#39;resource group name&#39;);</code></pre>

<p>Returns private DNS zone list as an <b>ARRAYREF</b> existing within specified <b>resource_group</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name4"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query.-Default:-.name"><b>query</b> Modify output filter using jmespath query. Default: [].name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_add_record">az_network_dns_add_record</h2>

<pre><code>az_network_dns_add_record(
    resource_group=&gt;&#39;resource group name&#39;,
    zone_name=&gt;&#39;opensuse.org&#39;,
    record_name=&gt;&#39;openqa&#39;,
    ip_addr=&gt;&#39;192.168.1.5&#39;
);</code></pre>

<p>Creates a DNS record inside Private DNS zone <b>$args{zone_name}</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name5"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="zone_name-Private-DNS-zone-name1"><b>zone_name</b> Private DNS zone name</dt>
<dd>

</dd>
<dt id="record_name-Private-DNS-zone-record-name"><b>record_name</b> Private DNS zone record name</dt>
<dd>

</dd>
<dt id="ip_addr-DNS-record-IPv4-address"><b>ip_addr</b> DNS record IPv4 address</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_link_create">az_network_dns_link_create</h2>

<pre><code>az_network_dns_link_create(
    resource_group=&gt;&#39;resource group name&#39;,
    zone_name=&#39;opensuse.org&#39;,
    vnet=&gt;&#39;vnet_rg&#39;,
    name=&gt;&#39;link_to_rg_vnet&#39;
);</code></pre>

<p>Creates private DNS zone link between VNET and DNS zone.</p>

<dl>

<dt id="resource_group-Resource-group-name6"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="zone_name-Private-DNS-zone-name2"><b>zone_name</b> Private DNS zone name</dt>
<dd>

</dd>
<dt id="vnet-VNET-name"><b>vnet</b> VNET name</dt>
<dd>

</dd>
<dt id="name-DNS-link-resource-name"><b>name</b> DNS link resource name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_link_delete">az_network_dns_link_delete</h2>

<pre><code>az_network_dns_link_delete(
    resource_group=&gt;&#39;resource group name&#39;,
    zone_name=&#39;opensuse.org&#39;,
    link_name=&gt;&#39;link_to_rg_vnet&#39;
);</code></pre>

<p>Deletes private DNS link between VNET and DNS zone.</p>

<dl>

<dt id="resource_group-Resource-group-name7"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="zone_name-Private-DNS-zone-name3"><b>zone_name</b> Private DNS zone name</dt>
<dd>

</dd>
<dt id="link_name-DNS-link-resource-name"><b>link_name</b> DNS link resource name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_link_list">az_network_dns_link_list</h2>

<pre><code>az_network_dns_link_list(resource_group=&gt;&#39;resource group name&#39;, zone_name=&#39;opensuse.org&#39;, query=&gt;&#39;[].id&#39;);</code></pre>

<p>Lists private DNS links withing specified <b>resource_group</b> and <b>zone_name</b>. Result is returned as <b>ARRAYREF</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name8"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
<dt id="zone_name-Private-DNS-zone-name4"><b>zone_name</b> Private DNS zone name</dt>
<dd>

</dd>
<dt id="query-Modify-output-filter-using-jmespath-query.-Default:-.name1"><b>query</b> Modify output filter using jmespath query. Default: [].name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_links_cleanup">az_network_dns_links_cleanup</h2>

<pre><code>az_network_dns_links_cleanup(resource_group=&gt;&#39;resource group name&#39;);</code></pre>

<p>Searches and deletes all DNS links within specified <b>resource_group</b>. Intended for cleanup to remove nested resource.</p>

<dl>

<dt id="resource_group-Resource-group-name9"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
</dl>

<h2 id="az_network_dns_zones_cleanup">az_network_dns_zones_cleanup</h2>

<pre><code>az_network_dns_zones_cleanup(resource_group=&gt;&#39;resource group name&#39;);</code></pre>

<p>Searches and deletes all DNS zones within specified <b>resource_group</b>.</p>

<dl>

<dt id="resource_group-Resource-group-name10"><b>resource_group</b> Resource group name</dt>
<dd>

</dd>
</dl>

<h2 id="az_account_show">az_account_show</h2>

<p>Get account informations, by default the ID. By default the output is an strings. Output can be modified using <b>$args{query}</b>.</p>

<dl>

<dt id="query---Modify-output-filter-using-jmespath-query.-Default:-id"><b>query</b> - Modify output filter using jmespath query. Default: &#39;id&#39;</dt>
<dd>

</dd>
</dl>

<h2 id=""></h2>

<p>List and return details about named role</p>

<dl>

<dt id="name-Name-of-the-role"><b>name</b> Name of the role</dt>
<dd>

</dd>
</dl>


</body>

</html>



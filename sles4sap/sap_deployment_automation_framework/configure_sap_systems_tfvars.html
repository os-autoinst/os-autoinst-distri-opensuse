<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/sles4sap/sap_deployment_automation_framework/configure_sap_systems_tfvars.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='../../style.css' />
</head>

<body>



<ul id="index"><li><a href="../../index.html"><i>&lt;= Back to file list</i></a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a>
    <ul>
      <li><a href="#create_sap_systems_tfvars">create_sap_systems_tfvars</a></li>
      <li><a href="#define_workload_environment">define_workload_environment</a></li>
      <li><a href="#define_networking">define_networking</a></li>
      <li><a href="#define_cluster_settings">define_cluster_settings</a></li>
      <li><a href="#define_database_tier">define_database_tier</a></li>
      <li><a href="#define_application_tier">define_application_tier</a></li>
      <li><a href="#define_sap_central_services">define_sap_central_services</a></li>
      <li><a href="#define_application_servers">define_application_servers</a></li>
      <li><a href="#define_miscellaneous_settings">define_miscellaneous_settings</a></li>
      <li><a href="#define_nfs_settings">define_nfs_settings</a></li>
      <li><a href="#define_vm_images">define_vm_images</a></li>
    </ul>
  </li>
</ul><h1>lib/sles4sap/sap_deployment_automation_framework/configure_sap_systems_tfvars.pm</h1>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>Library with common functions for Microsoft SDAF deployment automation that help with preparation of &#39;SAP-SYSTEMS&#39; tfvars file. File is generated according to example template: https://github.com/Azure/SAP-automation-samples/blob/main/Terraform/WORKSPACES/SYSTEM/LAB-SECE-SAP04-L00/LAB-SECE-SAP04-L00.tfvars</p>

<h2 id="create_sap_systems_tfvars">create_sap_systems_tfvars</h2>

<pre><code>create_sap_systems_tfvars(workload_vnet_code=&gt;&#39;SAP04&#39;, os_image=&gt;$os_img [, av_zones=&gt;&#39;true&#39;]);</code></pre>

<p>Creates data structure with content of sap systems tfvars file according to provided arguments and required OpenQA settings. Data structure converted into tfvars format is written into target file.</p>

<ul>

<li><p><b>av_zones</b>: Define if availability zones should be used. Default: true</p>

</li>
<li><p><b>workload_vnet_code</b>: Workload zone VNET code.</p>

</li>
</ul>

<h2 id="define_workload_environment">define_workload_environment</h2>

<pre><code>define_workload_environment(environment=&gt;&#39;LAB&#39;, location=&gt;&#39;swedencentral&#39;);</code></pre>

<p>Returns tfvars environment definitions section in HASHREF format. Example: {environment : &#39;&quot;LAB&quot;&#39;, location : &#39;&quot;swedencentral&quot;&#39;} Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>environment</b>: SDAF environment</p>

</li>
<li><p><b>location</b>: Public cloud location</p>

</li>
</ul>

<h2 id="define_networking">define_networking</h2>

<pre><code>define_networking(workload_vnet_code=&gt;&#39;SAP04&#39;);</code></pre>

<p>Returns tfvars networking definitions section in HASHREF format. <b>Example:</b> {network_logical_name : &#39;&quot;VNET01&quot;&#39;, use_private_endpoint : &#39;true&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>workload_vnet_code</b>: Workload zone VNET code.</p>

</li>
</ul>

<h2 id="define_cluster_settings">define_cluster_settings</h2>

<pre><code>define_cluster_settings();</code></pre>

<p>Returns tfvars cluster definitions section in HASHREF format. <b>Example:</b> {scs_cluster_type : &#39;&quot;AFA&quot;&#39;, use_msi_for_clusters : &#39;true&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<h2 id="define_database_tier">define_database_tier</h2>

<pre><code>define_database_tier(high_availability=&gt;&#39;true&#39;, av_zones=&gt;&#39;false&#39;);</code></pre>

<p>Returns tfvars database tier definitions section in HASHREF format. <b>Example:</b> {database_high_availability : &#39;true&#39;, database_use_avset : &#39;true&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>high_availability</b>: Enable database high availability deployment.</p>

</li>
<li><p><b>av_zones</b>: Define if availability zones should be used.</p>

</li>
</ul>

<h2 id="define_application_tier">define_application_tier</h2>

<pre><code>define_application_tier(enable_app_tier_deployment=&gt;&#39;true&#39;, sap_sid=&gt;&#39;ABC&#39;);</code></pre>

<p>Returns tfvars database tier definitions section in HASHREF format. <b>Example:</b> {enable_app_tier_deployment : &#39;true&#39;, sid : &#39;&quot;P00&quot;&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>enable_app_tier_deployment</b>: Enable deployment of Netweaver stack.</p>

</li>
<li><p><b>sap_sid</b>: Define Netweaver SAP system id.</p>

</li>
</ul>

<h2 id="define_sap_central_services">define_sap_central_services</h2>

<pre><code>define_sap_central_services(scs_server_count=&gt;&#39;1&#39;, sap_sid=&gt;&#39;ABC&#39;, high_availability=&gt;&#39;true&#39;);</code></pre>

<p>Returns tfvars sap central services definitions section in HASHREF format. <b>Example:</b> {scs_server_count : &#39;1&#39;, scs_server_use_ppg : &#39;true&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>scs_server_count</b>: Number of ASCS servers.</p>

</li>
<li><p><b>sap_sid</b>: Define Netweaver SAP system id.</p>

</li>
<li><p><b>high_availability</b>: Enable database high availability deployment.</p>

</li>
</ul>

<h2 id="define_application_servers">define_application_servers</h2>

<pre><code>define_application_servers(app_server_count=&gt;&#39;3&#39;);</code></pre>

<p>Returns tfvars sap application server definitions section in HASHREF format. <b>Example:</b> {scs_server_count : &#39;1&#39;, scs_server_use_ppg : &#39;true&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>app_server_count</b>: Number of application servers. Value &#39;1&#39; will deploy only PAS, anything above will deploy additional app servers.</p>

</li>
</ul>

<h2 id="define_miscellaneous_settings">define_miscellaneous_settings</h2>

<pre><code>define_miscellaneous_settings();</code></pre>

<p>Returns tfvars miscellaneous settings section in HASHREF format. <b>Example:</b> {resource_offset : &#39;1&#39;, deploy_application_security_groups : &#39;true&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<h2 id="define_nfs_settings">define_nfs_settings</h2>

<pre><code>define_nfs_settings();</code></pre>

<p>Returns tfvars NFS related setting section in HASHREF format. NFS storage is used to distribute installation media across all nodes. NFS storage is served by Hana DB node in case only database is installed, otherwise it is ASCS node that serves media. <b>Example:</b> {NFS_provider : &#39;&quot;AFS&quot;&#39;, ANF_HANA_use_AVG : &#39;false&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<h2 id="define_vm_images">define_vm_images</h2>

<pre><code>define_vm_images(os_image=&gt;&#39;suse:sles-sap-15-sp5:gen2:latest&#39;);</code></pre>

<p>VM OS image tfvars setting definition. Currently all VMs use the same OS image. Both BYOS and PAYG images can be used. <b>Example:</b> {source_image_id : &#39;&quot;suse:sles-sap-15-sp5:gen2:latest&quot;&#39;, publisher : &#39;&quot;SUSE&quot;&#39; ... } Pay attention to double quoting strings. They are very important in resulting file.</p>

<ul>

<li><p><b>os_image</b>: BYOS or PAYG image ID.</p>

</li>
</ul>


</body>

</html>



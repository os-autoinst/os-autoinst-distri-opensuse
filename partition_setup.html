<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lib/partition_setup.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='./style.css' />
</head>

<body>



<ul id="index"><li><a href="./index.html"><i>&lt;= Back to file list</i></a></li>
  <li><a href="#PARTITION_SETUP">PARTITION_SETUP</a>
    <ul>
      <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
      <li><a href="#is_storage_ng_newui">is_storage_ng_newui</a></li>
      <li><a href="#wipe_existing_pastitions_storage_ng">wipe_existing_pastitions_storage_ng</a></li>
      <li><a href="#create_new_partition_table">create_new_partition_table</a></li>
      <li><a href="#mount_device">mount_device</a></li>
      <li><a href="#set_partition_size">set_partition_size</a></li>
      <li><a href="#resize_partition">resize_partition</a></li>
      <li><a href="#addpart">addpart</a></li>
      <li><a href="#addvg">addvg</a></li>
      <li><a href="#addlv">addlv</a></li>
      <li><a href="#addboot">addboot</a></li>
      <li><a href="#select_first_hard_disk">select_first_hard_disk</a></li>
      <li><a href="#enable_encryption_guided_setup">enable_encryption_guided_setup</a></li>
      <li><a href="#take_first_disk_storage_ng">take_first_disk_storage_ng</a></li>
      <li><a href="#take_first_disk">take_first_disk</a></li>
    </ul>
  </li>
</ul><h1>lib/partition_setup.pm</h1>

<h1 id="PARTITION_SETUP">PARTITION_SETUP</h1>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p>This module contains functions for the partitioning part of the installation</p>

<h2 id="is_storage_ng_newui">is_storage_ng_newui</h2>

<pre><code>is_storage_ng_newui();</code></pre>

<p>Returns true if running on a scenario that expects storage-ng. We got changes to the storage-ng UI in SLE 15 SP1, Leap 15.1 and TW</p>

<h2 id="wipe_existing_pastitions_storage_ng">wipe_existing_pastitions_storage_ng</h2>

<pre><code>wipe_existing_pastitions_storage_ng();</code></pre>

<p>Deletes all existing partitions in the expert partitioner. Despite the name it does not check if it is run on a storage ng system, so be careful here</p>

<h2 id="create_new_partition_table">create_new_partition_table</h2>

<pre><code>create_new_partition_table($table_type);</code></pre>

<p><code>$table_type</code> can be &#39;GPT&#39; or &#39;MSDOS&#39; and is optional. This function creates a new partitioning setup from scratch.</p>

<h2 id="mount_device">mount_device</h2>

<pre><code>mount_device($mount);</code></pre>

<p>Set mount point and volume label. <code>$mount</code> is mount point.</p>

<h2 id="set_partition_size">set_partition_size</h2>

<pre><code>set_partition_size([size =&gt; $size]);</code></pre>

<p>The function can be executed when the SUT is on the yast partitioner panel `Add partition on /dev/xxx -&gt; New Partition Size` to set the <code>$args{size}</code> in megabytes.</p>

<p>Example:</p>

<pre><code>set_patition_size(size =&gt; &#39;100&#39;)</code></pre>

<h2 id="resize_partition">resize_partition</h2>

<pre><code>resize_partition();</code></pre>

<p>Method assumes that correct disk is already selected. Select Maximum size by default</p>

<h2 id="addpart">addpart</h2>

<pre><code>addpart(size =&gt; $size, role =&gt; $role [, format =&gt; $format] [, enable_snapshots =&gt; $enable_snapshots] [, fsid =&gt; $fsid] [, mount =&gt; $mount] [, encrypt =&gt; $encrypt]);</code></pre>

<p>Adds a partition with the given parameters to the partitioning table.</p>

<h2 id="addvg">addvg</h2>

<pre><code>addvg(name =&gt; $name [, add_all_pvs =&gt; $add_all_pvs]);</code></pre>

<p>Add a LVM volume group. Example:</p>

<pre><code>addvg(name =&gt; &#39;vg-system&#39;, add_all_pvs =&gt; 1);</code></pre>

<h2 id="addlv">addlv</h2>

<pre><code>addlv(vg =&gt; $vg, name =&gt; $name, role =&gt; $role [, size =&gt; $size] [, mount =&gt; $mount] [, [thinpool =&gt; $thinpool] | [thinvolume =&gt; $thinvolume]]);</code></pre>

<p>Add a LVM logical volume.</p>

<h2 id="addboot">addboot</h2>

<pre><code>addboot($part_size);</code></pre>

<p>Add a boot partition based on architecture.</p>

<p><code>$part_size</code> is the size of partition.</p>

<h2 id="select_first_hard_disk">select_first_hard_disk</h2>

<pre><code>select_first_hard_disk();</code></pre>

<p>Select the first hard disk.</p>

<p>The device should be [sv]da, other devices will be unselected. [sv]da device will also be force-selected at the end if needed (in some cases [sv]da is at the end of the list).</p>

<h2 id="enable_encryption_guided_setup">enable_encryption_guided_setup</h2>

<pre><code>enable_encryption_guided_setup();</code></pre>

<p>Enable encryption in guided setup during installation.</p>

<h2 id="take_first_disk_storage_ng">take_first_disk_storage_ng</h2>

<pre><code>take_first_disk_storage_ng();</code></pre>

<p>Only works on storage-ng and is being called by <code>take_first_disk</code>.</p>

<h2 id="take_first_disk">take_first_disk</h2>

<pre><code>take_first_disk([%args]);</code></pre>

<p>Take the first disk to be partitioned. Take first partition as storage ng if it is <code>is_storage_ng</code>. <code>[%args]</code> is device type.</p>

<p>Example:</p>

<pre><code>take_first_disk(iscsi =&gt; 1);</code></pre>


</body>

</html>



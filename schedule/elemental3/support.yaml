name: support
description: |
  - Generate Elemental OS image
  - Run distros-test-framework K8s tests
  Maintainer: unified-core@suse.com, ldevulder@suse.com
schedule:
  - microos/disk_boot
  - '{{generate_image}}'
  - '{{elemental_test}}'
conditional_schedule:
  generate_image:
    TESTED_CMD:
      customize:
        - elemental3/generate_image
      build_installer_iso:
        - elemental3/generate_image
      install:
        - elemental3/generate_image
  elemental_test:
    TEST_TYPE:
      k8s_validation:
        - elemental3/init_barriers
        - elemental3/wait_barriers
        - elemental3/configure_network
        - elemental3/test_framework
